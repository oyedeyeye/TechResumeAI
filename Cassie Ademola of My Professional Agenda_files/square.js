(()=>{var e={8518:(e,t,r)=>{"use strict";function n(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}r.d(t,{S:()=>i,n:()=>n})},1422:(e,t,r)=>{"use strict";r.d(t,{KV:()=>i,l$:()=>o});var n=r(8518);function i(){return!(0,n.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}e=r.hmd(e)},1170:(e,t,r)=>{"use strict";r.d(t,{ph:()=>l,yW:()=>u});var n=r(1422),i=r(1235);e=r.hmd(e);const o=(0,i.Rf)(),s={nowSeconds:()=>Date.now()/1e3},a=(0,n.KV)()?function(){try{return(0,n.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=o;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);let d;(()=>{const{performance:e}=o;if(!e||!e.now)return void(d="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,s=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+r-n):t;s||c<t?i<=c?(d="timeOrigin",e.timeOrigin):d="navigationStart":d="dateNow"})()},1235:(e,t,r)=>{"use strict";function n(e){return e&&e.Math==Math?e:void 0}r.d(t,{Rf:()=>o,YO:()=>s,n2:()=>i});const i="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof r.g&&n(r.g)||function(){return this}()||{};function o(){return i}function s(e,t,r){const n=r||i,o=n.__SENTRY__=n.__SENTRY__||{};return o[e]||(o[e]=t())}},9662:(e,t,r)=>{var n=r(614),i=r(6330),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a function")}},9483:(e,t,r)=>{var n=r(4411),i=r(6330),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a constructor")}},6077:(e,t,r)=>{var n=r(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},1223:(e,t,r)=>{var n=r(5112),i=r(30),o=r(3070).f,s=n("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},1530:(e,t,r)=>{"use strict";var n=r(8710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},9670:(e,t,r)=>{var n=r(111),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not an object")}},8533:(e,t,r)=>{"use strict";var n=r(2092).forEach,i=r(9341)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},1318:(e,t,r)=>{var n=r(5656),i=r(1400),o=r(6244),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:(e,t,r)=>{var n=r(9974),i=r(1702),o=r(8361),s=r(7908),a=r(6244),c=r(5417),u=i([].push),l=function(e){var t=1==e,r=2==e,i=3==e,l=4==e,d=6==e,p=7==e,h=5==e||d;return function(f,g,m,E){for(var v,y,_=s(f),A=o(_),S=n(g,m),C=a(A),I=0,T=E||c,O=t?T(f,C):r||p?T(f,0):void 0;C>I;I++)if((h||I in A)&&(y=S(v=A[I],I,_),e))if(t)O[I]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return I;case 2:u(O,v)}else switch(e){case 4:return!1;case 7:u(O,v)}return d?-1:i||l?l:O}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9341:(e,t,r)=>{"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3671:(e,t,r)=>{var n=r(9662),i=r(7908),o=r(8361),s=r(6244),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),p=s(l),h=e?p-1:0,f=e?-1:1;if(c<2)for(;;){if(h in d){u=d[h],h+=f;break}if(h+=f,e?h<0:p<=h)throw a("Reduce of empty array with no initial value")}for(;e?h>=0:p>h;h+=f)h in d&&(u=r(u,d[h],h,l));return u}};e.exports={left:c(!1),right:c(!0)}},1589:(e,t,r)=>{var n=r(1400),i=r(6244),o=r(6135),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),p=0;u<l;u++,p++)o(d,p,e[u]);return d.length=p,d}},7475:(e,t,r)=>{var n=r(3157),i=r(4411),o=r(111),s=r(5112)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},5417:(e,t,r)=>{var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4326:(e,t,r)=>{var n=r(1702),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:(e,t,r)=>{var n=r(1694),i=r(614),o=r(4326),s=r(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"==(n=o(t))&&i(t.callee)?"Arguments":n}},9920:(e,t,r)=>{var n=r(2597),i=r(3887),o=r(1236),s=r(3070);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},4964:(e,t,r)=>{var n=r(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:e=>{e.exports=function(e,t){return{value:e,done:t}}},8880:(e,t,r)=>{var n=r(9781),i=r(3070),o=r(9114);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,r)=>{"use strict";var n=r(4948),i=r(3070),o=r(9114);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},7045:(e,t,r)=>{var n=r(6339),i=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},8052:(e,t,r)=>{var n=r(614),i=r(3070),o=r(6339),s=r(3072);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:(e,t,r)=>{var n=r(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:(e,t,r)=>{var n=r(7854),i=r(111),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,r)=>{var n=r(317)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},5268:(e,t,r)=>{var n=r(4326);e.exports="undefined"!=typeof process&&"process"==n(process)},8113:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(e,t,r)=>{var n,i,o=r(7854),s=r(8113),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),i=r(1236).f,o=r(8880),s=r(8052),a=r(3072),c=r(9920),u=r(4705);e.exports=function(e,t){var r,l,d,p,h,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(p=t[l],d=e.dontCallGetSet?(h=i(r,l))&&h.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),s(r,l,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,r)=>{"use strict";r(4916);var n=r(1470),i=r(8052),o=r(2261),s=r(7293),a=r(5112),c=r(8880),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var p=a(e),h=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!h||!f||r){var g=n(/./[p]),m=t(p,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?h&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,p,m[1])}d&&c(l[p],"sham",!0)}},2104:(e,t,r)=>{var n=r(4374),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},9974:(e,t,r)=>{var n=r(1470),i=r(9662),o=r(4374),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:(e,t,r)=>{var n=r(4374),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:(e,t,r)=>{var n=r(9781),i=r(2597),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},5668:(e,t,r)=>{var n=r(1702),i=r(9662);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},1470:(e,t,r)=>{var n=r(4326),i=r(1702);e.exports=function(e){if("Function"===n(e))return i(e)}},1702:(e,t,r)=>{var n=r(4374),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},5005:(e,t,r)=>{var n=r(7854),i=r(614);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},1246:(e,t,r)=>{var n=r(648),i=r(8173),o=r(8554),s=r(7497),a=r(5112)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},4121:(e,t,r)=>{var n=r(6916),i=r(9662),o=r(9670),s=r(6330),a=r(1246),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw c(s(e)+" is not iterable")}},8173:(e,t,r)=>{var n=r(9662),i=r(8554);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},647:(e,t,r)=>{var n=r(1702),i=r(7908),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,p){var h=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(p,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,h);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var p=o(l/10);return 0===p?i:p<=f?void 0===n[p-1]?s(a,1):n[p-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:(e,t,r)=>{var n=r(1702),i=r(7908),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:e=>{e.exports={}},490:(e,t,r)=>{var n=r(5005);e.exports=n("document","documentElement")},4664:(e,t,r)=>{var n=r(9781),i=r(7293),o=r(317);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(4326),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:(e,t,r)=>{var n=r(614),i=r(111),o=r(7674);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},2788:(e,t,r)=>{var n=r(1702),i=r(614),o=r(5465),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},9909:(e,t,r)=>{var n,i,o,s=r(4811),a=r(7854),c=r(111),u=r(8880),l=r(2597),d=r(5465),p=r(6200),h=r(3501),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||d.state){var E=d.state||(d.state=new m);E.get=E.get,E.has=E.has,E.set=E.set,n=function(e,t){if(E.has(e))throw g(f);return t.facade=e,E.set(e,t),t},i=function(e){return E.get(e)||{}},o=function(e){return E.has(e)}}else{var v=p("state");h[v]=!0,n=function(e,t){if(l(e,v))throw g(f);return t.facade=e,u(e,v,t),t},i=function(e){return l(e,v)?e[v]:{}},o=function(e){return l(e,v)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return r}}}},7659:(e,t,r)=>{var n=r(5112),i=r(7497),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3157:(e,t,r)=>{var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},614:(e,t,r)=>{var n=r(4154),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(614),s=r(648),a=r(5005),c=r(2788),u=function(){},l=[],d=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=n(p.exec),f=!p.exec(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(p,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},4705:(e,t,r)=>{var n=r(7293),i=r(614),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==l||r!=u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},8554:e=>{e.exports=function(e){return null==e}},111:(e,t,r)=>{var n=r(614),i=r(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},1913:e=>{e.exports=!1},7850:(e,t,r)=>{var n=r(111),i=r(4326),o=r(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},2190:(e,t,r)=>{var n=r(5005),i=r(614),o=r(7976),s=r(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},408:(e,t,r)=>{var n=r(9974),i=r(6916),o=r(9670),s=r(6330),a=r(7659),c=r(6244),u=r(7976),l=r(4121),d=r(1246),p=r(9212),h=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,E,v,y,_,A,S,C=r&&r.that,I=!(!r||!r.AS_ENTRIES),T=!(!r||!r.IS_RECORD),O=!(!r||!r.IS_ITERATOR),P=!(!r||!r.INTERRUPTED),R=n(t,C),w=function(e){return m&&p(m,"normal",e),new f(!0,e)},b=function(e){return I?(o(e),P?R(e[0],e[1],w):R(e[0],e[1])):P?R(e,w):R(e)};if(T)m=e.iterator;else if(O)m=e;else{if(!(E=d(e)))throw h(s(e)+" is not iterable");if(a(E)){for(v=0,y=c(e);y>v;v++)if((_=b(e[v]))&&u(g,_))return _;return new f(!1)}m=l(e,E)}for(A=T?e.next:m.next;!(S=i(A,m)).done;){try{_=b(S.value)}catch(e){p(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},9212:(e,t,r)=>{var n=r(6916),i=r(9670),o=r(8173);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},3061:(e,t,r)=>{"use strict";var n=r(3383).IteratorPrototype,i=r(30),o=r(9114),s=r(8003),a=r(7497),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},1656:(e,t,r)=>{"use strict";var n=r(2109),i=r(6916),o=r(1913),s=r(6530),a=r(614),c=r(3061),u=r(9518),l=r(7674),d=r(8003),p=r(8880),h=r(8052),f=r(5112),g=r(7497),m=r(3383),E=s.PROPER,v=s.CONFIGURABLE,y=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,A=f("iterator"),S="keys",C="values",I="entries",T=function(){return this};e.exports=function(e,t,r,s,f,m,O){c(r,t,s);var P,R,w,b=function(e){if(e===f&&k)return k;if(!_&&e in L)return L[e];switch(e){case S:case C:case I:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[A]||L["@@iterator"]||f&&L[f],k=!_&&x||b(f),M="Array"==t&&L.entries||x;if(M&&(P=u(M.call(new e)))!==Object.prototype&&P.next&&(o||u(P)===y||(l?l(P,y):a(P[A])||h(P,A,T)),d(P,N,!0,!0),o&&(g[N]=T)),E&&f==C&&x&&x.name!==C&&(!o&&v?p(L,"name",C):(D=!0,k=function(){return i(x,this)})),f)if(R={values:b(C),keys:m?k:b(S),entries:b(I)},O)for(w in R)(_||D||!(w in L))&&h(L,w,R[w]);else n({target:t,proto:!0,forced:_||D},R);return o&&!O||L[A]===k||h(L,A,k,{name:f}),g[t]=k,R}},3383:(e,t,r)=>{"use strict";var n,i,o,s=r(7293),a=r(614),c=r(111),u=r(30),l=r(9518),d=r(8052),p=r(5112),h=r(1913),f=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:h&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},7497:e=>{e.exports={}},6244:(e,t,r)=>{var n=r(7466);e.exports=function(e){return n(e.length)}},6339:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(614),s=r(2597),a=r(9781),c=r(6530).CONFIGURABLE,u=r(2788),l=r(9909),d=l.enforce,p=l.get,h=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),E=n([].join),v=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(h(t),0,7)&&(t="["+m(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=E(y,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&p(this).source||u(this)}),"toString")},4758:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},3929:(e,t,r)=>{var n=r(7850),i=TypeError;e.exports=function(e){if(n(e))throw i("The method doesn't accept regular expressions");return e}},2814:(e,t,r)=>{var n=r(7854),i=r(7293),o=r(1702),s=r(1340),a=r(3111).trim,c=r(1361),u=o("".charAt),l=n.parseFloat,d=n.Symbol,p=d&&d.iterator,h=1/l(c+"-0")!=-1/0||p&&!i((function(){l(Object(p))}));e.exports=h?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"==u(t,0)?-0:r}:l},1574:(e,t,r)=>{"use strict";var n=r(9781),i=r(1702),o=r(6916),s=r(7293),a=r(1956),c=r(5181),u=r(5296),l=r(7908),d=r(8361),p=Object.assign,h=Object.defineProperty,f=i([].concat);e.exports=!p||s((function(){if(n&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=p({},e)[r]||a(p({},t)).join("")!=i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,p=c.f,h=u.f;i>s;)for(var g,m=d(arguments[s++]),E=p?f(a(m),p(m)):a(m),v=E.length,y=0;v>y;)g=E[y++],n&&!o(h,m,g)||(r[g]=m[g]);return r}:p},30:(e,t,r)=>{var n,i=r(9670),o=r(6048),s=r(748),a=r(3501),c=r(490),u=r(317),l=r(6200),d="prototype",p="script",h=l("IE_PROTO"),f=function(){},g=function(e){return"<"+p+">"+e+"</"+p+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},E=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;E="undefined"!=typeof document?document.domain&&n?m(n):(t=u("iframe"),r="java"+p+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):m(n);for(var i=s.length;i--;)delete E[d][s[i]];return E()};a[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[h]=e):r=E(),void 0===t?r:o.f(r,t)}},6048:(e,t,r)=>{var n=r(9781),i=r(3353),o=r(3070),s=r(9670),a=r(5656),c=r(1956);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},3070:(e,t,r)=>{var n=r(9781),i=r(4664),o=r(3353),s=r(9670),a=r(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",h="writable";t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),i=r(6916),o=r(5296),s=r(9114),a=r(5656),c=r(4948),u=r(2597),l=r(4664),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),i=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=>{var n=r(2597),i=r(614),o=r(7908),s=r(6200),a=r(8544),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},7976:(e,t,r)=>{var n=r(1702);e.exports=n({}.isPrototypeOf)},6324:(e,t,r)=>{var n=r(1702),i=r(2597),o=r(5656),s=r(1318).indexOf,a=r(3501),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},1956:(e,t,r)=>{var n=r(6324),i=r(748);e.exports=Object.keys||function(e){return n(e,i)}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:(e,t,r)=>{var n=r(5668),i=r(9670),o=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},4699:(e,t,r)=>{var n=r(9781),i=r(1702),o=r(1956),s=r(5656),a=i(r(5296).f),c=i([].push),u=function(e){return function(t){for(var r,i=s(t),u=o(i),l=u.length,d=0,p=[];l>d;)r=u[d++],n&&!a(i,r)||c(p,e?[r,i[r]]:i[r]);return p}};e.exports={entries:u(!0),values:u(!1)}},2140:(e,t,r)=>{var n=r(6916),i=r(614),o=r(111),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw s("Can't convert object to primitive value")}},3887:(e,t,r)=>{var n=r(5005),i=r(1702),o=r(8006),s=r(5181),a=r(9670),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},2626:(e,t,r)=>{var n=r(3070).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7651:(e,t,r)=>{var n=r(6916),i=r(9670),o=r(614),s=r(4326),a=r(2261),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw c("RegExp#exec called on incompatible receiver")}},2261:(e,t,r)=>{"use strict";var n,i,o=r(6916),s=r(1702),a=r(1340),c=r(7066),u=r(2999),l=r(2309),d=r(30),p=r(9909).get,h=r(9441),f=r(7168),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,E=m,v=s("".charAt),y=s("".indexOf),_=s("".replace),A=s("".slice),S=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),C=u.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(S||I||C||h||f)&&(E=function(e){var t,r,n,i,s,u,l,h=this,f=p(h),T=a(e),O=f.raw;if(O)return O.lastIndex=h.lastIndex,t=o(E,O,T),h.lastIndex=O.lastIndex,t;var P=f.groups,R=C&&h.sticky,w=o(c,h),b=h.source,N=0,D=T;if(R&&(w=_(w,"y",""),-1===y(w,"g")&&(w+="g"),D=A(T,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==v(T,h.lastIndex-1))&&(b="(?: "+b+")",D=" "+D,N++),r=new RegExp("^(?:"+b+")",w)),I&&(r=new RegExp("^"+b+"$(?!\\s)",w)),S&&(n=h.lastIndex),i=o(m,R?r:h,D),R?i?(i.input=A(i.input,N),i[0]=A(i[0],N),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:S&&i&&(h.lastIndex=h.global?i.index+i[0].length:n),I&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&P)for(i.groups=u=d(null),s=0;s<P.length;s++)u[(l=P[s])[0]]=i[l[1]];return i}),e.exports=E},7066:(e,t,r)=>{"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:(e,t,r)=>{var n=r(6916),i=r(2597),o=r(7976),s=r(7066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},2999:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:(e,t,r)=>{var n=r(8554),i=TypeError;e.exports=function(e){if(n(e))throw i("Can't call method on "+e);return e}},1150:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},6340:(e,t,r)=>{"use strict";var n=r(5005),i=r(7045),o=r(5112),s=r(9781),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},8003:(e,t,r)=>{var n=r(3070).f,i=r(2597),o=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(2309),i=r(9711),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:(e,t,r)=>{var n=r(7854),i=r(3072),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},2309:(e,t,r)=>{var n=r(1913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.1",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(e,t,r)=>{var n=r(9670),i=r(9483),o=r(8554),s=r(5112)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},8710:(e,t,r)=>{var n=r(1702),i=r(9303),o=r(1340),s=r(4488),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),p=i(r),h=d.length;return p<0||p>=h?e?"":void 0:(n=c(d,p))<55296||n>56319||p+1===h||(l=c(d,p+1))<56320||l>57343?e?a(d,p):n:e?u(d,p,p+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},8415:(e,t,r)=>{"use strict";var n=r(9303),i=r(1340),o=r(4488),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},6091:(e,t,r)=>{var n=r(6530).PROPER,i=r(7293),o=r(1361);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},3111:(e,t,r)=>{var n=r(1702),i=r(4488),o=r(1340),s=r(1361),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},6293:(e,t,r)=>{var n=r(7392),i=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},863:(e,t,r)=>{var n=r(1702);e.exports=n(1..valueOf)},1400:(e,t,r)=>{var n=r(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},5656:(e,t,r)=>{var n=r(8361),i=r(4488);e.exports=function(e){return n(i(e))}},9303:(e,t,r)=>{var n=r(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7466:(e,t,r)=>{var n=r(9303),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488),i=Object;e.exports=function(e){return i(n(e))}},7593:(e,t,r)=>{var n=r(6916),i=r(111),o=r(2190),s=r(8173),a=r(2140),c=r(5112),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,r)=>{var n=r(7593),i=r(2190);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},1340:(e,t,r)=>{var n=r(648),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,r)=>{var n=r(1702),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},3307:(e,t,r)=>{var n=r(6293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,r)=>{var n=r(9781),i=r(7293);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:(e,t,r)=>{var n=r(7854),i=r(614),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5112:(e,t,r)=>{var n=r(7854),i=r(2309),o=r(2597),s=r(9711),a=r(6293),c=r(3307),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1361:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},6699:(e,t,r)=>{"use strict";var n=r(2109),i=r(1318).includes,o=r(7293),s=r(1223);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},6992:(e,t,r)=>{"use strict";var n=r(5656),i=r(1223),o=r(7497),s=r(9909),a=r(3070).f,c=r(1656),u=r(6178),l=r(1913),d=r(9781),p="Array Iterator",h=s.set,f=s.getterFor(p);e.exports=c(Array,"Array",(function(e,t){h(this,{type:p,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==r?n:"values"==r?t[n]:[n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},5827:(e,t,r)=>{"use strict";var n=r(2109),i=r(3671).left,o=r(9341),s=r(7392);n({target:"Array",proto:!0,forced:!r(5268)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},1874:(e,t,r)=>{var n=r(2109),i=r(2814);n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},6977:(e,t,r)=>{"use strict";var n=r(2109),i=r(1702),o=r(9303),s=r(863),a=r(8415),c=r(7293),u=RangeError,l=String,d=Math.floor,p=i(a),h=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},E=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},v=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+p("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",y="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)E(d,1<<23),n-=23;E(d,1<<n),m(d,1,1),E(d,2),y=v(d)}else m(d,0,r),m(d,1<<-t,0),y=v(d)+p("0",c);return c>0?f+((i=y.length)<=c?"0."+p("0",c-i)+y:h(y,0,i-c)+"."+h(y,i-c)):f+y}})},9601:(e,t,r)=>{var n=r(2109),i=r(1574);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9720:(e,t,r)=>{var n=r(2109),i=r(4699).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},8559:(e,t,r)=>{var n=r(2109),i=r(408),o=r(6135);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},6833:(e,t,r)=>{var n=r(2109),i=r(4699).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},4603:(e,t,r)=>{var n=r(9781),i=r(7854),o=r(1702),s=r(4705),a=r(9587),c=r(8880),u=r(8006).f,l=r(7976),d=r(7850),p=r(1340),h=r(4706),f=r(2999),g=r(2626),m=r(8052),E=r(7293),v=r(2597),y=r(9909).enforce,_=r(6340),A=r(5112),S=r(9441),C=r(7168),I=A("match"),T=i.RegExp,O=T.prototype,P=i.SyntaxError,R=o(O.exec),w=o("".charAt),b=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new T(x)!==x,U=f.MISSED_STICKY,H=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!M||U||S||C||E((function(){return k[I]=!1,T(x)!=x||T(k)==k||"/a/i"!=T(x,"i")}))))){for(var B=function(e,t){var r,n,i,o,s,u,f=l(O,this),g=d(e),m=void 0===t,E=[],_=e;if(!f&&g&&m&&e.constructor===B)return e;if((g||l(O,e))&&(e=e.source,m&&(t=h(_))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),_=e,S&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=b(t,/s/g,"")),r=t,U&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&H&&(t=b(t,/y/g,"")),C&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=w(e,n)))t+=w(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:R(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||v(s,l))throw new P("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],E=o[1]),s=a(T(e,t),f?this:O,B),(n||i||E.length)&&(u=y(s),n&&(u.dotAll=!0,u.raw=B(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=w(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+w(e,++n);return i}(e),r)),i&&(u.sticky=!0),E.length&&(u.groups=E)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},G=u(T),j=0;G.length>j;)g(B,T,G[j++]);O.constructor=B,B.prototype=O,m(i,"RegExp",B,{constructor:!0})}_("RegExp")},4916:(e,t,r)=>{"use strict";var n=r(2109),i=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:(e,t,r)=>{"use strict";var n=r(6530).PROPER,i=r(8052),o=r(9670),s=r(1340),a=r(7293),c=r(4706),u="toString",l=RegExp.prototype[u],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=n&&l.name!=u;(d||p)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},7852:(e,t,r)=>{"use strict";var n,i=r(2109),o=r(1470),s=r(1236).f,a=r(7466),c=r(1340),u=r(3929),l=r(4488),d=r(4964),p=r(1913),h=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!p&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return h?h(t,o,i):f(t,i-o.length,i)===o}})},2023:(e,t,r)=>{"use strict";var n=r(2109),i=r(1702),o=r(3929),s=r(4488),a=r(1340),c=r(4964),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},4723:(e,t,r)=>{"use strict";var n=r(6916),i=r(7007),o=r(9670),s=r(8554),a=r(7466),c=r(1340),u=r(4488),l=r(8173),d=r(1530),p=r(7651);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return p(n,i);var u=n.unicode;n.lastIndex=0;for(var l,h=[],f=0;null!==(l=p(n,i));){var g=c(l[0]);h[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:h}]}))},5306:(e,t,r)=>{"use strict";var n=r(2104),i=r(6916),o=r(1702),s=r(7007),a=r(7293),c=r(9670),u=r(614),l=r(8554),d=r(9303),p=r(7466),h=r(1340),f=r(4488),g=r(1530),m=r(8173),E=r(647),v=r(7651),y=r(5112)("replace"),_=Math.max,A=Math.min,S=o([].concat),C=o([].push),I=o("".indexOf),T=o("".slice),O="$0"==="a".replace(/./,"$0"),P=!!/./[y]&&""===/./[y]("a","$0");s("replace",(function(e,t,r){var o=P?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,y);return o?i(o,e,n,r):i(t,h(n),e,r)},function(e,i){var s=c(this),a=h(e);if("string"==typeof i&&-1===I(i,o)&&-1===I(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=h(i));var m=s.global;if(m){var y=s.unicode;s.lastIndex=0}for(var O=[];;){var P=v(s,a);if(null===P)break;if(C(O,P),!m)break;""===h(P[0])&&(s.lastIndex=g(a,p(s.lastIndex),y))}for(var R,w="",b=0,N=0;N<O.length;N++){for(var D=h((P=O[N])[0]),L=_(A(d(P.index),a.length),0),x=[],k=1;k<P.length;k++)C(x,void 0===(R=P[k])?R:String(R));var M=P.groups;if(f){var U=S([D],x,L,a);void 0!==M&&C(U,M);var H=h(n(i,void 0,U))}else H=E(D,a,L,x,M,i);L>=b&&(w+=T(a,b,L)+H,b=L+D.length)}return w+T(a,b)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!O||P)},4765:(e,t,r)=>{"use strict";var n=r(6916),i=r(7007),o=r(9670),s=r(8554),a=r(4488),c=r(1150),u=r(1340),l=r(8173),d=r(7651);i("search",(function(e,t,r){return[function(t){var r=a(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](u(r))},function(e){var n=o(this),i=u(e),s=r(t,n,i);if(s.done)return s.value;var a=n.lastIndex;c(a,0)||(n.lastIndex=0);var l=d(n,i);return c(n.lastIndex,a)||(n.lastIndex=a),null===l?-1:l.index}]}))},3123:(e,t,r)=>{"use strict";var n=r(2104),i=r(6916),o=r(1702),s=r(7007),a=r(9670),c=r(8554),u=r(7850),l=r(4488),d=r(6707),p=r(1530),h=r(7466),f=r(1340),g=r(8173),m=r(1589),E=r(7651),v=r(2261),y=r(2999),_=r(7293),A=y.UNSUPPORTED_Y,S=4294967295,C=Math.min,I=[].push,T=o(/./.exec),O=o(I),P=o("".slice);s("split",(function(e,t,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?S:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,p=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,E=new RegExp(e.source,h+"g");(a=i(v,E,o))&&!((c=E.lastIndex)>g&&(O(p,P(o,g,a.index)),a.length>1&&a.index<o.length&&n(I,p,m(a,1)),d=a[0].length,g=c,p.length>=s));)E.lastIndex===a.index&&E.lastIndex++;return g===o.length?!d&&T(E,"")||O(p,""):O(p,P(o,g)),p.length>s?m(p,0,s):p}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(A?"g":"y"),m=new u(A?"^(?:"+i.source+")":i,g),v=void 0===n?S:n>>>0;if(0===v)return[];if(0===s.length)return null===E(m,s)?[s]:[];for(var y=0,_=0,I=[];_<s.length;){m.lastIndex=A?0:_;var T,R=E(m,A?P(s,_):s);if(null===R||(T=C(h(m.lastIndex+(A?_:0)),s.length))===y)_=p(s,_,l);else{if(O(I,P(s,y,_)),I.length===v)return I;for(var w=1;w<=R.length-1;w++)if(O(I,R[w]),I.length===v)return I;_=y=T}}return O(I,P(s,y)),I}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),A)},6755:(e,t,r)=>{"use strict";var n,i=r(2109),o=r(1470),s=r(1236).f,a=r(7466),c=r(1340),u=r(3929),l=r(4488),d=r(4964),p=r(1913),h=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!p&&!m&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return h?h(t,n,r):f(t,r,r+n.length)===n}})},3210:(e,t,r)=>{"use strict";var n=r(2109),i=r(3111).trim;n({target:"String",proto:!0,forced:r(6091)("trim")},{trim:function(){return i(this)}})},1817:(e,t,r)=>{"use strict";var n=r(2109),i=r(9781),o=r(7854),s=r(1702),a=r(2597),c=r(614),u=r(7976),l=r(1340),d=r(7045),p=r(9920),h=o.Symbol,f=h&&h.prototype;if(i&&c(h)&&(!("description"in f)||void 0!==h().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new h(e):void 0===e?h():h(e);return""===e&&(g[t]=!0),t};p(m,h),m.prototype=f,f.constructor=m;var E="Symbol(test)"==String(h("test")),v=s(f.valueOf),y=s(f.toString),_=/^Symbol\((.*)\)[^)]+$/,A=s("".replace),S=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=v(this);if(a(g,e))return"";var t=y(e),r=E?S(t,7,-1):A(t,_,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:m})}},4747:(e,t,r)=>{var n=r(7854),i=r(8324),o=r(8509),s=r(8533),a=r(8880),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},3948:(e,t,r)=>{var n=r(7854),i=r(8324),o=r(8509),s=r(6992),a=r(8880),c=r(5112),u=c("iterator"),l=c("toStringTag"),d=s.values,p=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var h in i)p(n[h]&&n[h].prototype,h);p(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{FunctionToString:()=>Q,InboundFilters:()=>ce});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>Tt,Dedupe:()=>Lt,GlobalHandlers:()=>lt,HttpContext:()=>Dt,LinkedErrors:()=>bt,TryCatch:()=>Et}),r(6992),r(3948),r(1817),r(4747),r(4916);var n=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s,a,c,u,l,d,p,h,f,g={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};function m(e){return t=e,r=f.JAVASCRIPT,n=new Blob([t],{type:r}),URL.createObjectURL(n);var t,r,n}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(s||(s={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(a||(a={})),function(e){e.FULL="FULL",e.MIN="MIN"}(c||(c={})),function(e){e.CARD="CARD"}(u||(u={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(l||(l={})),function(e){e.SUCCESS="SUCCESS"}(d||(d={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(p||(p={})),function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(h||(h={})),function(e){e.JAVASCRIPT="text/javascript",e.HTML="text/html"}(f||(f={}));var E=null!=="production"?"production":"development",v={get AFTERPAY_SCRIPT_URL(){switch(E){case h.test:return m("window.AfterPay = {};");case h.production:return"https://portal.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);case h.sandbox:return"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);default:return"https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID)}},get AFTERPAY_MESSAGING_SCRIPT_URL(){return E===h.test?m("window.Afterpay = {};"):"https://js.afterpay.com/afterpay-1.x.js"},get AFTERPAY_CREATE_CHECKOUT(){return"".concat(this.API_URL,"/bnpl/afterpay/create-checkout")},get AFTERPAY_MERCHANT_ID(){return"b8a38183b2e5959390488e48f9b109f6a73fd53c"},get AFTERPAY_STYLES(){return"".concat(this.ASSET_URL,"/afterpay.css")},get ANALYTICS_PUBLIC_ENDPOINT(){return E===h.test?m("window.Square.Analytics = {};"):"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js")},get API_HOST(){switch(E){case h.production:return"pci-connect.squareup.com";case h.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(E){case h.production:return"squareup.com";case h.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get APPENDED_FILE_NAME(){return""},get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT(){return"".concat(this.API_URL,"/v2/apple-pay/validate-merchant")},get ASSET_BASE_URL(){return function(e){switch(e){case h.production:return"https://web.squarecdn.com";case h.sandbox:return"https://sandbox.web.squarecdn.com";case h.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(h[E])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){return E===h.production?"https://api.cash.app":"https://api.cashstaging.app"},get CASH_APP_API_CUSTOMER(){return"".concat(this.CASH_APP_API,"/customer")},get CASH_APP_AUTH_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/cash-app/auth")},get CASH_APP_PAY_CLIENT_ID(){switch(E){case h.production:return"CA-CI_SQ_SELLER";case h.sandbox:return"CAS-CI_SQ_SELLER_SANDBOX";default:return"CAS-CI_SQ_SELLER_STAGING"}},get CASH_APP_STYLES(){return"".concat(this.ASSET_URL,"/cash.css")},get CASH_APP_PAY_SCRIPT_URL(){switch(E){case h.production:return"https://kit.cash.app/v1/pay.js";case h.test:return m("window.CashApp = {};");default:return"https://sandbox.kit.cash.app/v1/pay.js"}},get PLAID_OAUTH_REDIRECT_URI(){return""},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return E!==h.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat("",".html")},get GOOGLE_PAY_ENV(){return E===h.production?p.PRODUCTION:p.TEST},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get GOOGLE_PAY_MERCHANT_ID(){return"05498866192997955200"},get GOOGLE_PAY_SCRIPT_URL(){return E===h.test?m("window.google = {};"):"https://pay.google.com/gp/p/js/pay.js"},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe").concat("",".html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get MASTERPASS_CALLBACK_ENDPOINT(){return"".concat(this.API_URL,"/v2/masterpass/callback")},get MASTERPASS_LIBRARY_URL(){return"".concat(this.API_URL,"/v2/masterpass/frame")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PLAID_LINK_ENV(){return E===h.production?"production":"sandbox"},get PLAID_LINK_SCRIPT_URL(){return E===h.test?m("window.Plaid = {};"):"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},get SENTRY_DSN(){switch(E){case h.test:case h.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat("",".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.48.4"},get WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/wallet-nonce")},env:E},y=v;r(9714),r(9720);const _=Object.prototype.toString;function A(e){switch(_.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return b(e,Error)}}function S(e,t){return _.call(e)===`[object ${t}]`}function C(e){return S(e,"ErrorEvent")}function I(e){return S(e,"DOMError")}function T(e){return S(e,"String")}function O(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function P(e){return S(e,"Object")}function R(e){return"undefined"!=typeof Event&&b(e,Event)}function w(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function b(e,t){try{return e instanceof t}catch(e){return!1}}var N=r(1235);const D=(0,N.Rf)(),L=80;function x(e,t={}){try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||L;for(;r&&o++<n&&(u=k(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function k(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&T(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}function M(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function U(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function H(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!T(e)&&(S(t,"RegExp")?t.test(e):!!T(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function B(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);if("function"==typeof i)try{j(i,n)}catch(e){}e[t]=i}function G(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}function j(e,t){const r=t.prototype||{};e.prototype=t.prototype=r,G(e,"__sentry_original__",t)}function q(e){return e.__sentry_original__}function F(e){if(A(e))return{message:e.message,name:e.name,stack:e.stack,...Y(e)};if(R(e)){const t={type:e.type,target:V(e.target),currentTarget:V(e.currentTarget),...Y(e)};return"undefined"!=typeof CustomEvent&&b(e,CustomEvent)&&(t.detail=e.detail),t}return e}function V(e){try{return"undefined"!=typeof Element&&b(e,Element)?x(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function Y(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function z(e,t=40){const r=Object.keys(F(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return M(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:M(n,t)}return""}function K(e){return W(e,new Map)}function W(e,t){if(P(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=W(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(W(e,t))})),n}return e}let $;class Q{constructor(){Q.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Q.id}setupOnce(){$=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=q(this)||this;return $.apply(t,e)}}catch(e){}}}Q.__initStatic();const Z=["debug","info","warn","error","log","assert","trace"];function X(e){if(!("console"in N.n2))return e();const t=N.n2.console,r={};Z.forEach((e=>{const n=t[e]&&t[e].__sentry_original__;e in t&&n&&(r[e]=t[e],t[e]=n)}));try{return e()}finally{Object.keys(r).forEach((e=>{t[e]=r[e]}))}}function J(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Z.forEach((r=>{t[r]=(...t)=>{e&&X((()=>{N.n2.console[r](`Sentry Logger [${r}]:`,...t)}))}})):Z.forEach((e=>{t[e]=()=>{}})),t}let ee;function te(){const e=N.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const r=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function re(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ne(e){const{message:t,event_id:r}=e;if(t)return t;const n=re(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function ie(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function oe(e,t){const r=re(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function se(e){if(e&&e.__sentry_captured__)return!0;try{G(e,"__sentry_captured__",!0)}catch(e){}return!1}ee="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,N.YO)("logger",J):J();const ae=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class ce{static __initStatic(){this.id="InboundFilters"}__init(){this.name=ce.id}constructor(e={}){this._options=e,ce.prototype.__init.call(this)}setupOnce(e,t){const r=e=>{const r=t();if(r){const t=r.getIntegration(ce);if(t){const n=r.getClient(),i=n?n.getOptions():{},o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...ae],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${ne(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:r=""}=e.exception.values&&e.exception.values[0]||{};return[`${r}`,`${t}: ${r}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error(`Cannot extract message for event ${ne(e)}`),[]}return[]}(e).some((e=>H(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ne(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&H(r,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${ne(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=ue(e);return!!r&&H(r,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ne(e)}.\nUrl: ${ue(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=ue(e);return!r||H(r,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ne(e)}.\nUrl: ${ue(e)}`),!0)}(e,o)?null:e}}return e};r.id=this.name,e(r)}}function ue(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error(`Cannot extract url for event ${ne(e)}`),null}}ce.__initStatic();var le=r(1170);const de="production";var pe;function he(e){return new ge((t=>{t(e)}))}function fe(e){return new ge(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(pe||(pe={}));class ge{__init(){this._state=pe.PENDING}__init2(){this._handlers=[]}constructor(e){ge.prototype.__init.call(this),ge.prototype.__init2.call(this),ge.prototype.__init3.call(this),ge.prototype.__init4.call(this),ge.prototype.__init5.call(this),ge.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new ge(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new ge(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init3(){this._resolve=e=>{this._setResult(pe.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(pe.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===pe.PENDING&&(w(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===pe.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===pe.RESOLVED&&e[1](this._value),this._state===pe.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function me(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,le.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:te()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class Ee{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new Ee;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&me(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Ee?t:this}return e instanceof Ee?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):P(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:(0,le.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,n].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const r=t.name;r&&(e.tags={transaction:r,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...ve(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,r,n=0){return new ge(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.id&&null===a&&ee.log(`Event processor "${s.id}" dropped event`),w(a)?a.then((t=>this._notifyEventProcessors(e,t,r,n+1).then(i))).then(null,o):this._notifyEventProcessors(e,a,r,n+1).then(i).then(null,o)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function ve(){return(0,N.YO)("globalEventProcessors",(()=>[]))}function ye(e){ve().push(e)}const _e=4,Ae=100;class Se{constructor(e,t=new Ee,r=_e){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Ee.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:te(),n=new Error("Sentry syntheticException");return this._withClient(((i,o)=>{i.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},o)})),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:te(),i=new Error(e);return this._withClient(((o,s)=>{o.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},s)})),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:te();return e.type||(this._lastEventId=r),this._withClient(((n,i)=>{n.captureEvent(e,{...t,event_id:r},i)})),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Ae}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:(0,le.yW)(),...e},a=i?X((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Ie(this);try{e(this)}finally{Ie(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||r||console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),me(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=de}=r&&r.getOptions()||{},{userAgent:o}=N.n2.navigator||{},s=function(e){const t=(0,le.ph)(),r={sid:te(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return K({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&me(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&me(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const r=Ce().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ce(){return N.n2.__SENTRY__=N.n2.__SENTRY__||{extensions:{},hub:void 0},N.n2}function Ie(e){const t=Ce(),r=Oe(t);return Pe(t,e),r}function Te(){const e=Ce();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ce()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Oe(e).isOlderThan(_e)||Pe(e,new Se),Oe(e);var t}(e)}function Oe(e){return(0,N.YO)("hub",(()=>new Se),e)}function Pe(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Re=N.n2;let we=0;function be(){return we>0}function Ne(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(q(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>Ne(e,t)));return e.apply(this,i)}catch(e){throw we++,setTimeout((()=>{we--})),i=r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(ie(e,void 0,void 0),oe(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Te().captureException(i,{captureContext:undefined})},Te().withScope(i),e}var i};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}j(n,e),G(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const De=/\(error: (.*)\)/;const Le="<anonymous>";function xe(e){try{return e&&"function"==typeof e&&e.name||Le}catch(e){return Le}}const ke=(0,N.Rf)();function Me(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Ue=(0,N.Rf)(),He=(0,N.Rf)(),Be="__sentry_xhr_v2__",Ge={},je={};function qe(e){if(!je[e])switch(je[e]=!0,e){case"console":"console"in He&&Z.forEach((function(e){e in He.console&&B(He.console,e,(function(t){return function(...r){Ve("console",{args:r,level:e}),t&&t.apply(He.console,r)}}))}));break;case"dom":!function(){if(!("document"in He))return;const e=Ve.bind(null,"dom"),t=Ze(e,!0);He.document.addEventListener("click",t,!1),He.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=He[t]&&He[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(B(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=Ze(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),B(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in He))return;const e=XMLHttpRequest.prototype;B(e,"open",(function(e){return function(...t){const r=t[1],n=this[Be]={method:T(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};T(r)&&"POST"===n.method&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[Be];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Ve("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?B(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),B(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[Be];return i&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),B(e,"send",(function(e){return function(...t){const r=this[Be];return r&&void 0!==t[0]&&(r.body=t[0]),Ve("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in ke))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(Me(ke.fetch))return!0;let e=!1;const t=ke.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=Me(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&B(He,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:ze(t),method:Ye(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:ze(t),method:Ye(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return Ve("fetch",{...i}),e.apply(He,t).then((e=>(Ve("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Ve("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=Ue.chrome,t=e&&e.app&&e.app.runtime,r="history"in Ue&&!!Ue.history.pushState&&!!Ue.history.replaceState;return!t&&r}())return;const e=He.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=Ke,t=String(r);Ke=t,Ve("history",{from:e,to:t})}return e.apply(this,t)}}He.onpopstate=function(...t){const r=He.location.href,n=Ke;if(Ke=r,Ve("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},B(He.history,"pushState",t),B(He.history,"replaceState",t)}();break;case"error":Xe=He.onerror,He.onerror=function(e,t,r,n,i){return Ve("error",{column:n,error:i,line:r,msg:e,url:t}),!(!Xe||Xe.__SENTRY_LOADER__)&&Xe.apply(this,arguments)},He.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":Je=He.onunhandledrejection,He.onunhandledrejection=function(e){return Ve("unhandledrejection",e),!(Je&&!Je.__SENTRY_LOADER__)||Je.apply(this,arguments)},He.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("unknown instrumentation type:",e))}}function Fe(e,t){Ge[e]=Ge[e]||[],Ge[e].push(t),qe(e)}function Ve(e,t){if(e&&Ge[e])for(const r of Ge[e]||[])try{r(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${xe(r)}\nError:`,t)}}function Ye(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ze(e){return"string"==typeof e?e:e?Ye(e,"url")?e.url:e.toString?e.toString():"":""}let Ke;const We=1e3;let $e,Qe;function Ze(e,t=!1){return r=>{if(!r||Qe===r)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(r))return;const n="keypress"===r.type?"input":r.type;(void 0===$e||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Qe,r))&&(e({event:r,name:n,global:t}),Qe=r),clearTimeout($e),$e=He.setTimeout((()=>{$e=void 0}),We)}}let Xe=null,Je=null;function et(e,t=100,r=1/0){try{return rt("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function tt(e,t=3,r=102400){const n=et(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?tt(e,t-1,r):n;var i}function rt(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null===t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(function(e){return P(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if(void 0===t)return"[undefined]";if("function"==typeof t)return`[Function: ${xe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return rt("",d.toJSON(),l-1,i,o)}catch(e){}const p=Array.isArray(t)?[]:{};let h=0;const f=F(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(h>=i){p[e]="[MaxProperties ~]";break}const t=f[e];p[e]=rt(e,t,l-1,i,o),h++}return a(t),p}function nt(e,t){const r=ot(e,t),n={type:t&&t.name,value:at(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function it(e,t){return{exception:{values:[nt(e,t)]}}}function ot(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(st.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const st=/Minified React error #\d+;/i;function at(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ct(e,t,r,n,i){let o;if(C(t)&&t.error)return it(e,t.error);if(I(t)||S(t,"DOMException")){const i=t;if("stack"in t)o=it(e,t);else{const t=i.name||(I(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=ut(e,s,r,n),ie(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return A(t)?it(e,t):P(t)||R(t)?(o=function(e,t,r,n){const i=Te().getClient(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:R(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:`Non-Error ${n?"promise rejection":"exception"} captured with keys: ${z(t)}`}]},extra:{__serialized__:tt(t,o)}};if(r){const t=ot(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),oe(o,{synthetic:!0}),o):(o=ut(e,t,r,n),ie(o,`${t}`,void 0),oe(o,{synthetic:!0}),o)}function ut(e,t,r,n){const i={message:t};if(n&&r){const n=ot(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}return i}class lt{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=lt.id}__init2(){this._installFunc={onerror:dt,onunhandledrejection:pt}}constructor(e){lt.prototype.__init.call(this),lt.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const n=this._installFunc[r];n&&e[r]&&(t=r,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log(`Global Handler attached: ${t}`),n(),this._installFunc[r]=void 0)}var t}}function dt(){Fe("error",(e=>{const[t,r,n]=gt();if(!t.getIntegration(lt))return;const{msg:i,url:o,line:s,column:a,error:c}=e;if(be()||c&&c.__sentry_own_request__)return;const u=void 0===c&&T(i)?function(e,t,r,n){let i=C(e)?e.message:e,o="Error";const s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2]);return ht({exception:{values:[{type:o,value:i}]}},t,r,n)}(i,o,s,a):ht(ct(r,c||i,void 0,n,!1),o,s,a);u.level="error",ft(t,c,u,"onerror")}))}function pt(){Fe("unhandledrejection",(e=>{const[t,r,n]=gt();if(!t.getIntegration(lt))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}if(be()||i&&i.__sentry_own_request__)return!0;const o=O(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:ct(r,i,void 0,n,!0);o.level="error",ft(t,i,o,"onunhandledrejection")}))}function ht(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=T(t)&&t.length>0?t:function(){try{return D.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function ft(e,t,r,n){oe(r,{handled:!1,type:n}),e.captureEvent(r,{originalException:t})}function gt(){const e=Te(),t=e.getClient(),r=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,r.stackParser,r.attachStacktrace]}lt.__initStatic();const mt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Et{static __initStatic(){this.id="TryCatch"}__init(){this.name=Et.id}constructor(e){Et.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&B(Re,"setTimeout",vt),this._options.setInterval&&B(Re,"setInterval",vt),this._options.requestAnimationFrame&&B(Re,"requestAnimationFrame",yt),this._options.XMLHttpRequest&&"XMLHttpRequest"in Re&&B(XMLHttpRequest.prototype,"send",_t);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:mt).forEach(At)}}function vt(e){return function(...t){const r=t[0];return t[0]=Ne(r,{mechanism:{data:{function:xe(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function yt(e){return function(t){return e.apply(this,[Ne(t,{mechanism:{data:{function:"requestAnimationFrame",handler:xe(e)},handled:!0,type:"instrument"}})])}}function _t(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&B(r,e,(function(t){const r={mechanism:{data:{function:e,handler:xe(t)},handled:!0,type:"instrument"}},n=q(t);return n&&(r.mechanism.data.handler=xe(n)),Ne(t,r)}))})),e.apply(this,t)}}function At(e){const t=Re,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(B(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Ne(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:xe(n),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Ne(n,{mechanism:{data:{function:"addEventListener",handler:xe(n),target:e},handled:!0,type:"instrument"}}),i])}})),B(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}Et.__initStatic();const St=["fatal","error","warning","log","info","debug"];function Ct(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const It="Breadcrumbs";class Tt{static __initStatic(){this.id=It}__init(){this.name=Tt.id}constructor(e){Tt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){var e;this.options.console&&Fe("console",Ot),this.options.dom&&Fe("dom",(e=this.options.dom,function(t){let r,n="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=1024),"string"==typeof n&&(n=[n]);try{const e=t.event;r=function(e){return e&&!!e.target}(e)?x(e.target,{keyAttrs:n,maxStringLength:i}):x(e,{keyAttrs:n,maxStringLength:i})}catch(e){r="<unknown>"}0!==r.length&&Te().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&Fe("xhr",Pt),this.options.fetch&&Fe("fetch",Rt),this.options.history&&Fe("history",wt)}addSentryBreadcrumb(e){this.options.sentry&&Te().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:ne(e)},{event:e})}}function Ot(e){for(let t=0;t<e.args.length;t++)if("ref=Ref<"===e.args[t]){e.args[t+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:(r=e.level,"warn"===r?"warning":St.includes(r)?r:"log"),message:U(e.args," ")};var r;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${U(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Te().addBreadcrumb(t,{input:e.args,level:e.level})}function Pt(e){const{startTimestamp:t,endTimestamp:r}=e,n=e.xhr[Be];if(!t||!r||!n)return;const{method:i,url:o,status_code:s,body:a}=n,c={method:i,url:o,status_code:s},u={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:r};Te().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function Rt(e){const{startTimestamp:t,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const n=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};Te().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},i)}else{const n={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:r};Te().addBreadcrumb({category:"fetch",data:n,type:"http"},i)}}function wt(e){let t=e.from,r=e.to;const n=Ct(Re.location.href);let i=Ct(t);const o=Ct(r);i.path||(i=n),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),Te().addBreadcrumb({category:"navigation",data:{from:t,to:r}})}Tt.__initStatic();class bt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=bt.id}constructor(e={}){bt.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){const e=Te().getClient();e&&ye(((t,r)=>{const n=Te().getIntegration(bt);return n?function(e,t,r,n,i){if(!(n.exception&&n.exception.values&&i&&b(i.originalException,Error)))return n;const o=Nt(e,r,i.originalException,t);return n.exception.values=[...o,...n.exception.values],n}(e.getOptions().stackParser,n._key,n._limit,t,r):t}))}}function Nt(e,t,r,n,i=[]){if(!b(r[n],Error)||i.length+1>=t)return i;const o=nt(e,r[n]);return Nt(e,t,r[n],n,[o,...i])}bt.__initStatic();class Dt{constructor(){Dt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Dt.id}setupOnce(){ye((e=>{if(Te().getIntegration(Dt)){if(!Re.navigator&&!Re.location&&!Re.document)return e;const t=e.request&&e.request.url||Re.location&&Re.location.href,{referrer:r}=Re.document||{},{userAgent:n}=Re.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};return{...e,request:o}}return e}))}}Dt.__initStatic();class Lt{constructor(){Lt.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Lt.id}setupOnce(e,t){const r=e=>{if(e.type)return e;const r=t().getIntegration(Lt);if(r){try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!kt(e,t)&&!!xt(e,t))))}(e,t)||!!function(e,t){const r=Mt(t),n=Mt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!kt(e,t)&&!!xt(e,t)))}(e,t))}(e,r._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e};r.id=this.name,e(r)}}function xt(e,t){let r=Ut(e),n=Ut(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function kt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Mt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ut(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Lt.__initStatic();let Ht={};Re.Sentry&&Re.Sentry.Integrations&&(Ht=Re.Sentry.Integrations);const Bt={...Ht,...e,...t},Gt="?";function jt(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const qt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ft=/\((\S*)(?::(\d+))(?::(\d+))\)/,Vt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,zt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Kt=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=De.test(r)?r.replace(De,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=e.slice(0,50),r=t[t.length-1].function;r&&/sentryWrapped/.test(r)&&t.pop(),t.reverse();const n=t[t.length-1].function;return n&&/captureMessage|captureException/.test(n)&&t.pop(),t.map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=qt.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Ft.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=Wt(t[1]||Gt,t[2]);return jt(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Vt.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Yt.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Gt;return[r,e]=Wt(r,e),jt(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=zt.exec(e);return t?jt(t[2],t[1]||Gt,+t[3],t[4]?+t[4]:void 0):void 0}]),Wt=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Gt,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class $t extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Qt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Zt(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function Xt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Jt(e,t=[]){return[e,t]}function er(e,t){const[r,n]=e;return[r,[...n,t]]}function tr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function rr(e,t){return(t||new TextEncoder).encode(e)}function nr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[rr(i,t),e]:i.push("string"==typeof e?rr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(et(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function ir(e,t){const r="string"==typeof e.data?rr(e.data,t):e.data;return[K({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const or={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function sr(e){return or[e]}function ar(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}const cr=6e4;const ur=30;function lr(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return fe(new $t("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new ge(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{he(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||ur)){let n={};function i(i){const o=[];if(tr(i,((t,r)=>{const i=sr(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=dr(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return he();const s=Jt(i[0],o),a=t=>{tr(s,((r,n)=>{const i=dr(r,n);e.recordDroppedEvent(t,sr(n),i)}))};return r.add((()=>t({body:nr(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r]=e.split(":",2),o=parseInt(t,10),s=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))i[e]=n+s;else i.all=n+s}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?cr:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof $t)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error("Skipped sending event because buffer is full."),a("queue_overflow"),he();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function dr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let pr;function hr(e,t=function(){if(pr)return pr;if(Me(Re.fetch))return pr=Re.fetch.bind(Re);const e=Re.document;let t=Re.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return pr=t.bind(Re)}()){let r=0,n=0;return lr(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return pr=void 0,r-=o,n--,fe(e)}}))}const fr="7";function gr(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:fr,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const mr=[];function Er(e,t){t[e.name]=e,-1===mr.indexOf(e.name)&&(e.setupOnce(ye,Te),mr.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log(`Integration installed: ${e.name}`))}const vr=new WeakMap,yr="Not capturing exception because it's already been captured.";class _r{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(_r.prototype.__init.call(this),_r.prototype.__init2.call(this),_r.prototype.__init3.call(this),_r.prototype.__init4.call(this),_r.prototype.__init5.call(this),this._options=e,e.dsn){this._dsn=function(e){const t="string"==typeof e?function(e){const t=Qt.exec(e);if(!t)throw new $t(`Invalid Sentry Dsn: ${e}`);const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Xt({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):Xt(e);return function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:r,protocol:n}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new $t(`Invalid Sentry Dsn: ${t} missing`)})),!r.match(/^\d+$/))throw new $t(`Invalid Sentry Dsn: Invalid projectId ${r}`);if(!function(e){return"http"===e||"https"===e}(n))throw new $t(`Invalid Sentry Dsn: Invalid protocol ${n}`);if(t&&isNaN(parseInt(t,10)))throw new $t(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}(e.dsn);const t=gr(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("No DSN provided, client will not do anything.")}captureException(e,t,r){if(se(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log(yr));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=O(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&se(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log(yr));let n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((e=>{n=e}))),n}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),me(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e)))):he(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{e&&Er(e,t)})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Er(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let r=function(e,t,r,n){const i=ar(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&{dsn:Zt(n)},...i&&{trace:K({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Jt(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=er(r,ir(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,r,n){const i=ar(r);return Jt({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&{dsn:Zt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(me(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ge((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,r){const n=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),function(e,t,r,n){const{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e,s={...t,event_id:t.event_id||r.event_id||te(),timestamp:t.timestamp||(0,le.yW)()},a=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:de),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=M(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=M(s.value,o));const a=e.request;a&&a.url&&(a.url=M(a.url,o))}(s,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(s,a),void 0===t.type&&function(e,t){const r=N.n2._sentryDebugIds;if(!r)return;let n;const i=vr.get(t);i?n=i:(n=new Map,vr.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{}),s=new Set;try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&s.add(e.filename)}))}))}catch(e){}e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const a=e.debug_meta.images;s.forEach((e=>{o[e]&&a.push({type:"sourcemap",code_file:e,debug_id:o[e]})}))}(s,e.stackParser);let c=n;r.captureContext&&(c=Ee.clone(c).update(r.captureContext));let u=he(s);if(c){if(c.getAttachments){const e=[...r.attachments||[],...c.getAttachments()];e.length&&(r.attachments=e)}u=c.applyToEvent(s,r)}return u.then((e=>"number"==typeof i&&i>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:et(e.data,t,r)}})))},...e.user&&{user:et(e.user,t,r)},...e.contexts&&{contexts:et(e.contexts,t,r)},...e.extra&&{extra:et(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=et(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>(e.data&&(e.data=et(e.data,t,r)),e)))),n}(e,i,o):e))}(n,e,t,r)}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?ee.log(t.message):ee.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n;if(!this._isEnabled())return fe(new $t("SDK not enabled, will not capture event.","log"));const o=Sr(e),s=Ar(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),fe(new $t(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,r).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new $t("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return Ar(t)&&n?n(t,r):Sr(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(w(e))return e.then((e=>{if(!P(e)&&null!==e)throw new $t(r);return e}),(e=>{throw new $t(`${t} rejected with ${e}`)}));if(!P(e)&&null!==e)throw new $t(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new $t(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof $t)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new $t(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function Ar(e){return void 0===e.type}function Sr(e){return"transaction"===e.type}const Cr="7.50.0";var Ir,Tr=r(8518);class Or extends _r{constructor(e){const t=Re.SENTRY_SDK_SOURCE||(0,Tr.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Cr}],version:Cr},super(e),e.sendClientReports&&Re.document&&Re.document.addEventListener("visibilitychange",(()=>{"hidden"===Re.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=ct(e,t,r&&r.syntheticException||void 0,n);return oe(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),he(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=ut(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),he(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}sendEvent(e,t){const r=this.getIntegrationById(It);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,t)}captureUserFeedback(e){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:Zt(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Jt(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ee.log("Sending outcomes:",e);const t=function(e,t,r){return Jt(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:(0,le.yW)(),discarded_events:e}]])}(e,this._options.tunnel&&Zt(this._dsn));this._sendEnvelope(t)}}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}(Ir||(Ir={}));var Pr,Rr={get BACKOFF_FACTOR(){return 1.66},get REQUEST_DURATION_MAX_MS(){return 6e4},get REQUEST_TIMEOUT_MS(){return[1e4,2e4,3e4]},get RETRY_DELAY_MS(){return 200},STATUS_CODE:Ir};async function wr(e,t,r=new Error("Promise timeout exceeded")){let n=-1;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}class br extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,br.prototype)}}class Nr extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,Nr.prototype)}}class Dr extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,Dr.prototype)}}!function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT"}(Pr||(Pr={}));const Lr="include",xr="cors";function kr(e,t){return{body:e,status:t.status,statusText:t.statusText}}function Mr(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function Ur(e,t,r,n=1,i=Date.now()){const o=r.retryOnTimeout??!0,s=Date.now()-i,a=Rr.REQUEST_DURATION_MAX_MS-s,c=Math.min(r.timeout||Rr.REQUEST_TIMEOUT_MS[n-1],a);let u=null;void 0!==window.AbortController&&null!==window.AbortController&&(u=new window.AbortController);const l={...t,signal:u?u.signal:null};try{const t=await wr(window.fetch.bind(null,e,l),c,new br(n,s,e));return await async function(e,t){let r={};if(!(e.status<Rr.STATUS_CODE.INTERNAL_SERVER_ERROR))return kr(r,e);{let n;try{return e.status!==Rr.STATUS_CODE.NO_CONTENT&&(r=await e.json()),kr(r,e)}catch(r){if(r instanceof Error){const i=r.toString();try{n=await e.text(),n=`${n} ${i}`}catch{n=i}throw new Nr(t,e.status,n)}throw new Nr(t,e.status,JSON.stringify(r))}}}(t,e)}catch(a){let c=0;if(a instanceof br)u&&u.abort();else{if(a instanceof Nr)throw a;if(c=function(e,t){const r=function(e,t){return Math.floor(e*Math.pow(Rr.BACKOFF_FACTOR,t))}(Rr.RETRY_DELAY_MS,e-1),n=Date.now()-t,i=Rr.REQUEST_DURATION_MAX_MS-n,o=Rr.REQUEST_TIMEOUT_MS[e-1];return i<=r?i-o:r}(n,i),!o||c<=0)throw new Dr(n,s,e)}if(!o||n===Rr.REQUEST_TIMEOUT_MS.length)throw a;return new Promise((o=>{setTimeout((()=>{o(Ur(e,t,r,n+1,i))}),c)}))}}function Hr(e,t,r){const n=Mr(t.headers??{});return Ur(e,{body:JSON.stringify(t.body),headers:n,method:r,credentials:t.credentials??Lr,mode:t.mode??xr},t)}const Br=function(e,t){return Hr(e,t,Pr.POST)};var Gr,jr,qr,Fr,Vr,Yr,zr,Kr,Wr,$r,Qr,Zr,Xr,Jr,en,tn,rn,nn,on,sn;r(1874),r(6977),r(7852),r(4603),r(4723),r(6755),r(5306),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Gr||(Gr={}));class an extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,an.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class cn extends an{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,cn.prototype)}}class un extends an{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,un.prototype)}}class ln extends an{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,ln.prototype)}}class dn extends an{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,dn.prototype)}}class pn extends an{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,pn.prototype)}}class hn extends an{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,hn.prototype)}}class fn extends an{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,fn.prototype)}}class gn extends an{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,gn.prototype)}}class mn extends an{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,mn.prototype)}}class En extends an{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,En.prototype)}}class vn extends an{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,vn.prototype)}}class yn extends an{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,yn.prototype)}}class _n extends an{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,_n.prototype)}}class An extends an{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,An.prototype)}}class Sn extends an{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,Sn.prototype)}}class Cn extends an{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,Cn.prototype)}}r(6833),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(jr||(jr={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(qr||(qr={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(Fr||(Fr={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(Vr||(Vr={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Yr||(Yr={})),function(e){e.UNKNOWN="Unknown"}(zr||(zr={})),function(e){e.GIFT="Gift"}(Kr||(Kr={}));class In extends an{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(qr),...Object.values(Vr)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,In.prototype)}}class Tn extends an{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,Tn.prototype)}}class On extends an{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,On.prototype)}}class Pn extends an{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,Pn.prototype)}}class Rn extends an{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Rn.prototype)}}class wn extends an{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,wn.prototype)}}class bn extends an{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,bn.prototype)}}class Nn extends an{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Nn.prototype)}}class Dn extends an{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Dn.prototype)}}class Ln extends an{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Ln.prototype)}}class xn extends an{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,xn.prototype)}}class kn extends an{constructor(e,t){var r=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,kn.prototype)}}class Mn extends an{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,Mn.prototype)}}class Un extends an{constructor(e,t,r){super("error loading script ".concat(e,": ").concat(t," ").concat(null==r?void 0:r.toString())),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Un.prototype)}}class Hn extends an{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Hn.prototype)}}class Bn extends an{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Bn.prototype)}}class Gn extends an{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Gn.prototype)}}class jn extends an{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,jn.prototype)}}class qn extends an{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,qn.prototype)}}class Fn extends an{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Fn.prototype)}}!function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.CASH_APP="Cash App",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(Wr||(Wr={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}($r||($r={}));class Vn{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Qr||(Qr={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(Zr||(Zr={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Xr||(Xr={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Jr||(Jr={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(en||(en={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(tn||(tn={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(rn||(rn={})),function(e){e.MINT="mint",e.WHITE="white"}(nn||(nn={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(on||(on={})),function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(sn||(sn={}));var Yn,zn,Kn,Wn,$n,Qn,Zn,Xn,Jn,ei,ti,ri,ni,ii,oi,si=["borderColor","borderRadius","borderWidth"],ai=["borderColor","borderWidth"],ci=["color"],ui=["color"];function li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Yn||(Yn={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(zn||(zn={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Kn||(Kn={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(Wn||(Wn={})),function(e){e.STATIC="static",e.FILL="fill"}($n||($n={})),function(e){e.LONG="long",e.SHORT="short"}(Qn||(Qn={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Zn||(Zn={})),function(e){e.LIGHT="light",e.DARK="dark"}(Xn||(Xn={})),function(e){e.SQUARED="Squared",e.SEMIROUNDED="Semirounded",e.ROUNDED="Rounded"}(Jn||(Jn={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(ei||(ei={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(ti||(ti={})),function(e){e.DARK="dark",e.LIGHT="light"}(ri||(ri={})),function(e){e.FULL="full",e.STATIC="static"}(ni||(ni={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(ii||(ii={})),function(e){e.GBP="GBP",e.USD="USD"}(oi||(oi={}));var di=new RegExp(/^[\w.-]+$/i),pi=new RegExp(/sq0at/i);function hi(e){return y.env===e}function fi(){return hi(h.production)}var gi=1e3,mi=vi(60),Ei=yi(60);function vi(e){return e*gi}function yi(e){return e*mi}var _i={hoursToMs:function(e){return e*Ei},minutesToMs:yi,msToSeconds:function(e){return e/gi},secondsToMs:vi},Ai=/^_/g,Si=/(?!^)([A-Z])/g,Ci=/[\s_]+(?=[A-Za-z])/g;function Ii(e){return"JPY"===e.toUpperCase()?0:2}var Ti,Oi,Pi,Ri={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(Ai,"-").replace(Si," $1").replace(Ci,"-").toLowerCase()},delay:function(e){return new Promise((t=>setTimeout(t,e)))},decimalPlaces:Ii,formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isStaging:function(){return hi(h.staging)},isProduction:fi,isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:li,versionedUrl:function(e){return li(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},paymentRequestAmountToMoneyAmount:function(e,t){var r=Ii(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new Pn(e,t);var o=i[1];if(r>0){var s=i[2]||"";o=o+s+"0".repeat(r-s.length)}return Number(o)},moneyAmountToPaymentRequestAmount:function(e,t){var r=Ii(t);return(e/Math.pow(10,r)).toFixed(r)},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=Ii(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)}};!function(e){e.CanUseOverrideStrings="can_use_override_strings",e.CanUseInterac="can_use_interac",e.CanUseAchAuth="can_use_ach_auth",e.CanUseBNPLA="can_use_bnpl_a",e.RecordErrorMetrics="record_error_metrics"}(Ti||(Ti={})),function(e){e.Control="C",e.TreatmentA="T1"}(Oi||(Oi={})),function(e){e.NoSupport="NO_SUPPORT",e.Supported="SUPPORTED",e.Required="REQUIRED",e.Legacy="LEGACY"}(Pi||(Pi={}));var wi,bi,Ni=y.SENTRY_DSN;class Di{constructor(e){var t;t=e.useGlobalHandlers?new Bt.GlobalHandlers:new Bt.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new ce,new Q,new Bt.TryCatch,new Bt.Breadcrumbs,t,new Bt.LinkedErrors,new Bt.HttpContext],n={beforeSend:(t,r)=>{var n;if(!e.enableErrorLogging)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(void 0!==this.featureFlagHandler&&this.featureFlagHandler.isActive(Ti.RecordErrorMetrics)){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.sourceName,", error: ").concat(o);Br(y.METRICS_ERROR_URL,{body:{sdk_version:y.VERSION,error_message:s||""}}).catch((()=>{}))}return t},dsn:Ni,environment:e.environment,integrations:r,release:"web-payments-sdk@".concat(y.VERSION),stackParser:Kt,transport:e.transport||hr},i=new Or(n);this.hub=new Se(i),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",e.version)})),e.useGlobalHandlers&&Ie(this.hub)}setFeatureFlagHandler(e){this.featureFlagHandler=e}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ri.isInstanceOf(e,[Dr,br])||(e instanceof Nr&&this.hub.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage,level:"info"}),this.hub.withScope((r=>{Object.entries(t).forEach((e=>{var[t,n]=e;r.setTag(t,n)})),this.hub.captureException(e)})))}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(wi||(wi={})),function(e){e.UNKNOWN="UNKNOWN"}(bi||(bi={}));var Li,xi={[bi.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Li||(Li={}));var ki,Mi,Ui={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},Hi={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(ki||(ki={}));class Bi extends an{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Bi.prototype)}}function Gi(){return new qn([Hi.UNKNOWN])}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(Mi||(Mi={}));var ji={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},qi={message:"The requested resource was not found.",type:"NOT_FOUND"},Fi={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},Vi={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Yi={message:"Request not authorized.",type:"UNAUTHORIZED"},zi={message:"An unknown error has occurred",type:"UNKNOWN"};class Ki extends an{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,Ki.prototype)}}class Wi extends an{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){var{STATUS_CODE:t}=Rr;switch(e){case t.UNAUTHORIZED:return Yi;case t.NOT_FOUND:return qi;case t.TOO_MANY_REQUESTS:return Vi;case t.INTERNAL_SERVER_ERROR:return ji;case t.SERVICE_UNAVAILABLE:return Fi;default:return zi}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,Wi.prototype)}}class $i extends an{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,$i.prototype)}}class Qi extends an{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Qi.prototype)}}function Zi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(r),!0).forEach((function(t){Ji(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ji(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eo={HttpRequestTimeoutError:br,HttpRequestInvalidJsonError:Nr,HttpRequestNetworkError:Dr,InternalError:Ki,InternalHttpError:Wi,InternalPaymentMethodError:$i,InternalTimeoutError:Qi,InternalValidationError:Bi};function to(e){return Object.values(eo).some((t=>e instanceof t))}var ro,no,io,oo,so,ao,co,uo,lo,po={AfterpayAmountOutsideLimitsError:hn,AfterpayMerchantError:gn,AfterpayRequestError:pn,AfterpayUnsupportedCurrencyError:fn,BrowserNotSupportedError:Rn,ElementNotFoundError:En,InvalidCurrencyFormatError:Pn,InvalidElementTypeError:Ln,InvalidEventListenerCallbackError:_n,InvalidOptionError:An,InvalidPaymentRequestError:vn,InvalidPaymentRequestUpdateError:yn,PaymentMethodUnsupportedError:kn,PlaidMissingNameError:Sn,ScriptLoaderError:Un,TokenizationError:qn,UnexpectedError:Fn,VerifyBuyerError:Cn,WebSdkEmbedError:wn},ho=Xi(Xi(Xi({},po),eo),{},{AfterpayInvalidPaymentRequestError:mn,AfterpayOnTokenizeListenerError:ln,InvalidApplicationIdError:cn,InvalidInputStylePropertyError:Hn,InvalidInputStyleValueError:Bn,InvalidStylesError:jn,PaymentMethodAlreadyAttachedError:bn,PaymentMethodAlreadyDestroyedError:Dn,PaymentMethodMissingListener:dn,PaymentMethodNotAttachedError:Nn,SqError:an});!function(e){e.AttachStart="ATTACH:START",e.AttachOK="ATTACH:OK",e.AttachError="ATTACH:ERROR",e.BuildStart="BUILD:START",e.BuildOK="BUILD:OK",e.BuildError="BUILD:ERROR",e.ACHAuthStart="ACH_AUTH:START",e.ACHAuthOk="ACH_AUTH:OK",e.ACHAuthError="ACH_AUTH:ERROR",e.ACHAuthCanceled="ACH_AUTH:CANCEL",e.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",e.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",e.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",e.CashAppAuthStart="CASH_APP_AUTH:START",e.CashAppAuthOK="CASH_APP_AUTH:OK",e.CashAppAuthError="CASH_APP_AUTH:ERROR",e.CashAppPayClickValidating="CASH_APP_PAY_CLICK:VALIDATING",e.CashAppPayClickInvalid="CASH_APP_PAY_CLICK:INVALID",e.CashAppPayClickError="CASH_APP_PAY_CLICK:ERROR",e.CashAppPayAuthStart="CASH_APP_PAY_AUTH:START",e.FirstInteraction="FIRST_INTERACTION:OK",e.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",e.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",e.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",e.InitializeStart="INITIALIZATION:START",e.InitializeOK="INITIALIZATION:OK",e.InitializeError="INITIALIZATION:ERROR",e.LoadOK="LOAD:OK",e.MainIframeOK="MAIN_IFRAME:OK",e.NonceStart="NONCE:START",e.NonceOK="NONCE:OK",e.NonceError="NONCE:ERROR",e.VerificationStart="VERIFICATION:START",e.VerificationOK="VERIFICATION:OK",e.VerificationError="VERIFICATION:ERROR",e.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS"}(ro||(ro={})),function(e){e.ExternalSessionStart="EXTERNAL_SESSION:START",e.ExternalSessionOK="EXTERNAL_SESSION:OK",e.ExternalSessionError="EXTERNAL_SESSION:ERROR",e.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",e.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",e.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",e.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",e.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",e.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR"}(no||(no={})),function(e){e.Clear="CLEAR",e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.Destroyed="DESTROYED",e.Detached="DETACHED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.EventListenerOnCompleteResponse="EVENT_LISTENER_ON_COMPLETE_RESPONSE",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE",e.SetError="SET_ERROR"}(io||(io={})),function(e){e.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR",e.InvalidRedirectURI="INVALID_REDIRECT_URI"}(oo||(oo={})),function(e){e.ExperimentInteraction="EXPERIMENT_INTERACTION"}(so||(so={})),function(e){e.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",e.CASH_APP_AUTH="CASH_APP_AUTH",e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(ao||(ao={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(co||(co={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(uo||(uo={})),function(e){e.Ach="ACH",e.Afterpay="Afterpay",e.App="WebSDK",e.ApplePay="Apple Pay",e.Card="Card",e.CashApp="Cash App",e.CashAppPayV1="Cash App Pay V1",e.GooglePay="Google Pay",e.Masterpass="Masterpass",e.GiftCard="Gift Card",e.Fields="Fields",e.PaymentRequest="Payment Request"}(lo||(lo={}));var fo,go={CARD_NONCE_ENDPOINT:new RegExp(y.CARD_NONCE_ENDPOINT),CASH_APP_API_CUSTOMER:new RegExp(y.CASH_APP_API_CUSTOMER),CASH_APP_AUTH_ENDPOINT:new RegExp(y.CASH_APP_AUTH_ENDPOINT),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(y.GET_PRODUCT_INFORMATION_ENDPOINT),LIBRARY_RESOURCE:new RegExp("".concat(y.ASSET_BASE_URL,"/([\\w\\d.-]*/)?square").concat(y.APPENDED_FILE_NAME,"\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(y.ASSET_URL,"/main-iframe").concat(y.APPENDED_FILE_NAME))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(fo||(fo={}));var mo=new Set(Object.values(io)),Eo=new Set([ro.InitializeOK,so.ExperimentInteraction,oo.IframeMessengerTimeoutError]);r(4765);var vo,yo,_o,Ao,So={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function Co(){if(g.windowLocation===g.windowParentLocation)return g.windowLocation;var e=g.documentReferrer;return e&&0!==e.length?(vo||(vo=document.createElement("a")),vo.href="".concat(e),{hash:vo.hash,host:vo.host,hostname:vo.hostname,href:vo.href,origin:vo.origin,pathname:vo.pathname,port:vo.port,protocol:vo.protocol,search:vo.search,toString(){return this.href}}):So}function Io(e,t){var r={};return Object.keys(e).forEach((n=>{"object"==typeof e[n]&&!Array.isArray(e[n])&&t[n]?r[n]=Io(e[n],t[n]):r[n]=t[n]||e[n]})),r}!function(e){e.CA="CA",e.GB="GB",e.US="US"}(yo||(yo={})),function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(_o||(_o={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(Ao||(Ao={}));var To={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Oo={en:Ao.enUS,es:Ao.esES,fr:Ao.frFR,ja:Ao.jaJP},Po=Oo[_o.en];class Ro{constructor(e){this.currentLocale=Po,this.currentTranslations=To[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(To[e])this.currentLocale=e;else{if(!_o[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=Oo[t]}this.currentTranslations=To[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return r&&i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?Io(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var wo="INVALID_VALUE",bo="SANITIZED",No=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Do=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),Lo=new Set([...Do.values(),"eventName"]),xo=new Set(["includeInputLabels","postalCode","style"]),ko=new Set(["includeInputLabels","style"]),Mo=new Set(["lineItems","total","shippingOptions","shippingContact"]),Uo=new Set(["buttonColor","buttonSizeMode","buttonType"]),Ho=new Set(["shape","size","values","theme","width"]),Bo=es(sn),Go=es(jr),jo=es(Yr),qo=es($r),Fo=es(qr),Vo=es(Vr),Yo=es(Ao),zo=es(Wn),Ko=es($n),Wo=es(Qn),$o=es(oi),Qo=es(ti),Zo=es(ei),Xo=es(ri),Jo=es(ni);function es(e){return new Set(Object.values(e))}function ts(e){return JSON.stringify({value:e})}function rs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a=bo:n[o]&&(a=n[o].has(s)?s:wo),i[o]=a}})),JSON.stringify(i)}function ns(e){return rs(e,Ho,void 0,{shape:Zo,size:Qo,values:Xo,theme:Xo,width:Jo})}var is=function(e,t,r){switch(e){case io.Configured:case io.ConfigUpdated:return function(e,t){switch(e){case lo.Card:case lo.GiftCard:return function(e,t){return rs(t,e===lo.Card?xo:ko)}(e,t);case lo.GooglePay:return function(e){return rs(e,Uo,void 0,{buttonColor:zo,buttonSizeMode:Ko,buttonType:Wo})}(t);case lo.PaymentRequest:return function(e){return rs(e,No,Mo,{currencyCode:$o})}(t);case lo.CashAppPayV1:return ns(t)}return wo}(t,r);case io.Focused:return ts(function(e,t){if("string"!=typeof t)return wo;switch(e){case lo.Card:if(Fo.has(t))return t;break;case lo.GiftCard:if(Vo.has(t))return t}return wo}(t,r));case io.SetLocale:return ts(function(e){return"string"!=typeof e?wo:Yo.has(e)?e:wo}(r));case io.EventListenerAdded:return ts(function(e,t){if("string"!=typeof t)return wo;switch(e){case lo.Ach:if(Bo.has(t))return t;break;case lo.Card:if(Go.has(t))return t;break;case lo.GiftCard:if(jo.has(t))return t;break;case lo.PaymentRequest:if(qo.has(t))return t}return wo}(t,r));case io.EventListenerOnCompleteResponse:return function(e,t){return e===lo.PaymentRequest?function(e){return rs(e,Lo,Do,{eventName:qo})}(t):wo}(t,r);case io.Destroyed:case io.RecalculatedSize:default:return""}};function os(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function ss(e,t){return Boolean(e.querySelector(t))}function as(e,t){return void 0!==e[t]}r(8559);var cs=function(e){var t,r=as(e,"angular"),n=ss(e.document,"[ng-version]")||as(e,"getAllAngularRootElements")||as(e,"getAngularVersion"),i=as(e,"bootstrap"),o=as(e,"Ember"),s=as(e,"jQuery"),a=ss(e.document,'form[action*="paypal.com"]'),c=function(e){return os(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=ss(e.document,"*[data-reactroot]");if(t)return t;return os(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=as(e,"__NUXT__")||as(e,"$nuxt"),r=as(e,"__VUE__");if(r||t)return r||t;return os(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:as(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return!0===r})))};function us(e,t){var r=g.windowPerformance;if(!r||"function"!=typeof r.getEntriesByType)return null;var n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var ls=function(e){switch(e){case ao.CASH_APP_AUTH:return us(fo.fetch,go.CASH_APP_AUTH_ENDPOINT);case ao.CASH_APP_API_CUSTOMER:return us(fo.fetch,go.CASH_APP_API_CUSTOMER);case ao.GET_PRODUCT_INFORMATION:return us(fo.fetch,go.GET_PRODUCT_INFORMATION_ENDPOINT);case ao.MAIN_IFRAME:return us(fo.navigation,go.MAIN_IFRAME_RESOURCE);case ao.LOAD:return us(fo.script,go.LIBRARY_RESOURCE);case ao.NONCE:return us(fo.fetch,go.CARD_NONCE_ENDPOINT);default:return null}};function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach((function(t){hs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fs,gs=y.METRICS_URL,ms=y.METRICS_V2_URL;class Es{constructor(e,t){this.sdkVersion=y.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,t,r,n){try{var i={origin:Co().origin},o={innerHeight:g.windowInnerHeight,innerWidth:g.windowInnerWidth,language:g.windowNavigationLanguage},s=this.eventDuration(e,n),{event:a,eventSource:c,eventConfigurationValues:u,internalConfigurationValues:l}=e,d=this.sdkVersion,p=this.metricsSession(t,r),h={appLocation:i,avt:this.avt,browserData:o,event:a,eventSource:c,paymentMethodTrackingId:n,sdkVersion:d,session:p};void 0!==u&&(m=a,mo.has(m))&&(h.eventConfigurationValues=is(a,c,u)),void 0!==l&&function(e){return Eo.has(e)}(a)&&(h.internalConfigurationValues=JSON.stringify(l)),s&&(h.duration=s),a===ro.InitializeOK&&(h.jsFramework=this.getJSFrameworkValue());var f=!1;a!==ro.NonceOK&&a!==io.Destroyed||(f=!0),this.postMetricsEvent(h,f)}catch(e){this.errorLogger.captureException(e)}var m}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(cs(window))),this.jsFramework}eventDuration(e,t){var[r,n]=e.event.split(":");if(r in co){var i;if(r===co.INITIALIZATION?i=r:t&&(i="".concat(r,":").concat(t)),!i)return null;if(n===uo.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(n===uo.OK||n===uo.ERROR){var s=this.manualTelemetryStarts[i];return void 0===s?null:(delete this.manualTelemetryStarts[i],Date.now()-s)}}return n!==uo.START&&r in ao?ls(r):null}postMetricsEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&g.windowNavigationBeacon&&g.documentVisibilityState?(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===g.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))):Br(gs,{body:e}).catch((e=>{this.errorLogger.captureException(e)}))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(ms,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Br(ms,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t){return ps(ps({},this.applicationData),{},{instanceId:e,sessionId:t})}}!function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP="CASH_APP",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(fs||(fs={})),y.HYDRATION_ENDPOINT;var vs="UPDATE_SESSION";class ys{constructor(e,t){this.errorLogger=e,this.messenger=t}}var _s,As,Ss={[Ti.CanUseInterac]:{false:Oi.Control,true:Oi.TreatmentA},[Ti.CanUseOverrideStrings]:{false:Oi.Control,true:Oi.TreatmentA},[Ti.CanUseBNPLA]:{false:Oi.Control,true:Oi.TreatmentA},[Ti.RecordErrorMetrics]:{false:Oi.Control,true:Oi.TreatmentA},[Ti.CanUseAchAuth]:{[Pi.NoSupport]:Oi.Control,[Pi.Supported]:Oi.TreatmentA,[Pi.Required]:Oi.TreatmentA}};class Cs{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==Oi.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Ss[e][t]||Oi.Control}}!function(e){e.AFTERPAY="square-payments-afterpay-script",e.AFTERPAY_MESSAGING="square-payments-afterpay-messaging-script",e.ANALYTICS="square-payments-analytics-link-script",e.GOOGLE="square-payments-google-link-script",e.PLAID="square-payments-plaid-link-script",e.CASH_APP_PAY="square-payments-cash-app-pay-script"}(_s||(_s={})),function(e){e.AFTERPAY="window.AfterPay",e.AFTERPAY_MESSAGING="window.Afterpay",e.ANALYTICS="window.Square.Analytics",e.GOOGLE="window.google.payments",e.PLAID="window.Plaid",e.CASH_APP_PAY="window.CashApp"}(As||(As={}));var Is={};function Ts(e,t,r,n){var i=n();if(i)return Promise.resolve(i);if(Is[t])return Is[t];var o=document.createElement("script");return o.id=e,o.src=r,Is[t]=new Promise(((i,s)=>{o.onload=()=>{var o=n();if(o)i(o);else{Os(t,e);var a="".concat(t," is undefined");s(new Un(r,a))}},o.onerror=(n,i,o,a,c)=>{Os(t,e),s(new Un(r,"Unknown error occured",c))}})),document.body.appendChild(o),Is[t]}function Os(e,t){delete Is[e];var r=document.getElementById(t);r&&r.remove()}var Ps,Rs={loadScript:Ts,loadAfterpayScript:function(){return Ts(_s.AFTERPAY,As.AFTERPAY,y.AFTERPAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.AfterPay}))},loadAfterpayMessagingScript:function(){return Ts(_s.AFTERPAY_MESSAGING,As.AFTERPAY_MESSAGING,y.AFTERPAY_MESSAGING_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Afterpay}))},loadAnalyticsLinkScript:function(){return Ts(_s.ANALYTICS,As.ANALYTICS,y.ANALYTICS_PUBLIC_ENDPOINT,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.Square)||void 0===t?void 0:t.Analytics}))},loadCashAppPayScript:function(){return Ts(_s.CASH_APP_PAY,As.CASH_APP_PAY,y.CASH_APP_PAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.CashApp}))},loadGooglePayScript:function(){return Ts(_s.GOOGLE,As.GOOGLE,y.GOOGLE_PAY_SCRIPT_URL,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t?void 0:t.payments}))},loadPlaidLinkScript:function(){return Ts(_s.PLAID,As.PLAID,y.PLAID_LINK_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Plaid}))},resetScriptCache:Os};function ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(r),!0).forEach((function(t){Ns(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ns(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ds(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Ls=_i.hoursToMs(2);function xs(e){var{applicationId:t,locationId:r}=e;return Ps||(Ps=Rs.loadAnalyticsLinkScript().then((e=>new e(t,{locationId:r}))))}function ks(e){return function(e){return"region"in e||"country"in e||"countryName"in e}(e)?e:{addressLines:e.addressLines,familyName:e.familyName,givenName:e.givenName,email:e.email,country:e.countryCode,phone:e.phone,postalCode:e.postalCode,region:e.state,city:e.city}}function Ms(){var e;return e=function*(e){var t=yield xs(e);return new Promise((e=>{t.getToken(e)}))},Ms=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ds(o,n,i,s,a,"next",e)}function a(e){Ds(o,n,i,s,a,"throw",e)}s(void 0)}))},Ms.apply(this,arguments)}var Us={analyticsLibrary:xs,getToken:function(e){return Ms.apply(this,arguments)},resetLibraryCache:function(){Ps=void 0},verifyBuyer:function(e,t,r){var n=bs(bs({},r),{},{billingContact:ks(r.billingContact)});return new Promise(((r,i)=>{e.verifyBuyer(t,n,((e,t)=>{e?i(e):r(t)}))}))},toSqContact:ks};function Hs(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Bs,Gs="LOCALE_CHANGED_EVENT";class js extends ys{constructor(e,t,r,n,i,o,s,a){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagHandler=new Cs(a),this.featureFlagValues=a}addLocaleChangedListener(e){this.eventTarget.addEventListener(Gs,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(Gs,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(Gs,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(vs,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(Gs,r),this.messenger.sendOneWayMessage(vs,{session:this.session.serialize()}),t}updateSession(e){var t,r=this;return(t=function*(){r.session.setSessionId(e);try{var t=yield Us.getToken({applicationId:r.session.applicationId,locationId:r.session.locationId,websiteUrl:r.session.sourceUrl});r.errorLogger instanceof Di&&r.errorLogger.setSessionId(e),r.session.setAnalyticsToken(t)}catch(e){r.session.locationId&&r.errorLogger.captureException(e)}yield r.messenger.sendOneWayMessage(vs,{session:r.session.serialize()})},function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(e){Hs(o,n,i,s,a,"next",e)}function a(e){Hs(o,n,i,s,a,"throw",e)}s(void 0)}))})()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN"}(Bs||(Bs={}));var qs,Fs={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},Vs={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},Ys={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},zs={message:"Configuration is invalid.",type:"INVALID_CONFIG"},Ks={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(qs||(qs={}));var Ws={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"}};class $s extends an{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");r&&(n+=" and must be a(n) ".concat(r)),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,$s.prototype)}}class Qs extends an{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Qs.prototype)}}class Zs{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n++)r[n]===t&&(r.splice(n,1),n--)}dispatchEvent(e,t){if(e in this.listeners)for(var r=new Vn(e,t),n=[...this.listeners[e]],i=0,o=n.length;i<o;i++)try{n[i](r)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Xs,Js,ea=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(Xs||(Xs={}));class ta{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t,r){var n={event:e,eventSource:this.eventSource};t&&(n.eventConfigurationValues=t),r&&(n.internalConfigurationValues=r);var{instanceId:i,sessionId:o}=this.session.serialize();return this.metricsLogger.logEvent(n,i,o,this.paymentMethodTrackingId)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}!function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(Js||(Js={}));class ra{constructor(e){this.status=Js.DETACHED,this.eventTarget=new Zs,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve()}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===Js.DESTROYED)throw new Dn(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===Js.ATTACHED)throw new bn(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==Js.ATTACHED)throw new Nn(this.methodType)}}var na,ia={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};function oa(e,t){var r=e;return e instanceof an||(r=new an,t.captureException(e)),{errors:[r],status:Qr.ERROR}}class sa{constructor(e){this.id=ea(),this.context=e}request(e,t){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:t})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}function aa(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(na||(na={}));var ca=new Set(["ITEM_ERROR"]),ua=new Set(["en","es"]),la=["US"];function da(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function pa(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){da(o,n,i,s,a,"next",e)}function a(e){da(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ha={build(e,t,r){var n=t.getSession(),i=new sa(t),o=function(e,t,r,n){var i;function o(){var s;return s=function*(){var o=yield function(e,t){var r=e.getSession();if(!r.locationId)throw new Fn("locationId not defined when creating OAuth Plaid Link Session");var n=y.PLAID_OAUTH_REDIRECT_URI,i=g.windowNavigationLanguage.slice(0,2),o={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,locationId:r.locationId,redirectUri:n,languageCode:i}};return t.request(na.CREATE_OAUTH_PLAID_LINK_SESSION,o)}(t,r);return function(r){return new Promise(((o,s)=>{var a=g.windowNavigationLanguage.split("-")[0];ua.has(a)||(a="en");var{errorLogger:c,metricsHandler:u}=t;i=e.create({clientName:"Square, Inc.",countryCodes:la,env:y.PLAID_LINK_ENV,language:a,onEvent:(e,t)=>{e!==sn.ERROR||ca.has(t.error_type)||c.captureException(new $i("PlaidErrorEvent: ".concat(JSON.stringify(t)),Wr.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(u.logEvent(no.ExternalSessionError),ca.has(e.error_type)||c.captureException(new $i("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(t),Wr.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(!t||!t.accounts||!t.accounts[0]){u.logEvent(no.ExternalSessionError);var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return c.captureException(n),void s(n)}u.logEvent(no.ExternalSessionOK),o({kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id,gringottsSessionToken:r.gringottsSessionToken})},product:["auth"],token:r.plaidLinkToken}),u.logEvent(no.ExternalSessionStart),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=s.apply(e,t);function o(e){aa(i,r,n,o,a,"next",e)}function a(e){aa(i,r,n,o,a,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(e,t,i,{onEvent:r});function s(){return s=pa((function*(e){var t=yield o.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return a.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:Qr.CANCEL}})),s.apply(this,arguments)}function a(){return(a=pa((function*(e,r,o,s){var a={accountHolderName:e,gringottsSessionToken:s,plaidPublicToken:r,selectedPlaidBankAccountId:o},c={bankNonceRequest:{clientId:n.applicationId,locationId:n.locationId,paymentMethodTrackingId:t.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:n.sessionId,websdkVersion:y.VERSION,websiteUrl:n.sourceUrl}};try{var u=yield i.request(na.REQUEST_ACH_BANK_NONCE,c);return yield t.updateSession(u.sessionId),t.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{status:Qr.OK,bankNonce:u.bankNonce,accountDetails:u.accountDetails}}catch(e){throw e instanceof qn?e:new qn([Ui.UNKNOWN])}}))).apply(this,arguments)}return Object.freeze({run:function(e){return s.apply(this,arguments)},destroy:function(){o.destroy()}})}};class fa extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,fa.prototype)}}class ga extends Error{constructor(e,t){super(`The listener provided for event type ${e} timed out after ${t} milliseconds. If you've returned a promise, ensure it is resolving`),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,ga.prototype)}}class ma extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,ma.prototype)}}class Ea{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t){const r=this.listeners.get(e);void 0!==r?r.push(t):this.listeners.set(e,[t]);const n=this.eventBuffer.get(e);n&&(n.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new ma(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0!==t?t.push(e):this.eventBuffer.set(e.type,[e])}}}class va{constructor(){this.eventTarget=new Ea}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}function ya(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}const _a=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),r.setAttribute("src",`${ya(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`),document.body.append(r)}))},Aa=function(e){e.parentElement?.removeChild(e)};class Sa extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,Sa.prototype)}}class Ca extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Ca.prototype)}}class Ia extends Error{constructor(e,t,r){if(r){const n=document.getElementById(r);super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${void 0!==n?.src?"exists":"does not exist"}`)}else super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`);this.type=e,this.id=t,this.iframeID=r,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,Ia.prototype)}}const Ta="channel:connected",Oa="channel:connecting",Pa="channel:close",Ra="channel:error";class wa{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(Oa):this.handleConnecting(e);break;case this.messageWithName(Ta):this.handleConnected();break;case this.messageWithName(Pa):this.close();break;case this.messageWithName(Ra):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(Pa)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new Sa("message channel is already connected");if(e){if(void 0===e.origin)throw new Sa("message channel remote.origin must be defined");if(null===e.window)throw new Sa("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(Oa),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new Sa("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(Ta)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new Sa("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(Ra)),this.errorHandler&&this.errorHandler(new Sa("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}var ba;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(ba||(ba={}));class Na{constructor(e={}){this.messageListeners=new Map,this.channel=new wa(e.name),this.channel.onmessage=this.handleMessage.bind(this),this.payloadSerializer=e.payloadSerializer,this.errorSerializer=e.errorSerializer}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${ba.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${ba.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t){const r=t||this.uniqueId();return this.addMessageEventListener(e,r),r}connect(e,t){this.iframeID=t,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new Sa(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Ca("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new Ia(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const t=this.errorSerializer,r=this.payloadSerializer;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[ba.ACK,ba.OK,ba.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${ba.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0!==r){const e=r.deserialize(t);s(e)}else s(t)},messageType:`${e.type}:${ba.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0!==t){const e=t.deserialize(r);a(e)}else a(r)},messageType:`${e.type}:${ba.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${ba.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Ca("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}const Da={get IFRAME_NAME(){return"ach_authz"},get TEST_ENV(){return"test"},get DEV_ENV(){return"development"},get SANDBOX_ENV(){return"sandbox"},get PRODUCTION_ENV(){return"production"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}}};var La;!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}(La||(La={}));const xa=function(){const e={name:Da.IFRAME_NAME};return new Na(e)},ka=async function(e,t,r){const n=ya(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},Ma={build(e,t){const r=xa(),n=new va;return Promise.resolve(Object.freeze({captureAuthorization:async function(i){let o;try{!function(e){if(!e.idempotencyKey)throw new fa("idempotencyKey is invalid");if(!e.applicationId)throw new fa("applicationId is invalid");if(!e.locationId)throw new fa("locationId is invalid");if(!e.bankNonce&&!e.bankAccountId)throw new fa("one of bankNonce or bankAccountId needs to be provided");if(e.bankNonce&&e.bankAccountId)throw new fa("only one of bankNonce or bankAccountId needs to be provided");if(!e.total)throw new fa("total needs to be provided");if("number"!=typeof e.total.amount)throw new fa("amount needs to be a number");if(!e.total.currencyCode)throw new fa("total needs to be valid")}(i),o=await _a(e,t),await ka(r,o,e);const s=await r.request(La.CAPTURE_AUTHORIZATION,i);"success"===s.kind?n.dispatchEvent({type:"signed",token:s.token}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({type:"error",error:e})}o&&Aa(o)},addEventListener:function(e,t){n.addEventListener(e,t)}}))}};var Ua;function Ha(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}!function(e){e.GBP="GBP",e.USD="USD"}(Ua||(Ua={}));var Ba={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:s,onError:a}=e;function c(){var e;return e=function*(e){var c=yield Ma.build(t,y.VERSION);i.metricsHandler.logEvent(ro.ACHAuthStart),c.addEventListener("signed",(function(t){o(t.token,e.bankAccountDetails),i.metricsHandler.logEvent(ro.ACHAuthOk)})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent(ro.ACHAuthCanceled),s()})),c.addEventListener("error",(function(e){a(e.error),i.metricsHandler.logEvent(ro.ACHAuthError)})),yield c.captureAuthorization({idempotencyKey:r,applicationId:n.applicationId,locationId:n.locationId,bankNonce:e.bankNonce,bankAccountId:e.bankAccountId,total:e.total})},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ha(o,n,i,s,a,"next",e)}function a(e){Ha(o,n,i,s,a,"throw",e)}s(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}};function Ga(){var e=document.createElement("div");return e.setAttribute("style","position:fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: 3; background-color: ".concat("rgba(0, 0, 0, 0.8)","; opacity: 0;")),document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))}function ja(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function qa(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ja(o,n,i,s,a,"next",e)}function a(e){ja(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Fa extends ra{constructor(e,t,r){super(t),this.methodType=Wr.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new On("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new On("redirectURI",e,"URI must not contain query parameters");return!0}throw new On("redirectURI","".concat(e),"Must be a valid URI")}(null==r?void 0:r.redirectURI)}catch(e){this.metricsHandler.logEvent(oo.InvalidRedirectURI,void 0,e.message),console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new On("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new On("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==r?void 0:r.transactionId)}catch(e){console.warn(e.message)}var n=this.dispatchPlaidEvent.bind(this);this.plaidNonceFlow=ha.build(e,this.context,n),this.achAuthFlow=Ba.build({env:y.env,transactionId:(null==r?void 0:r.transactionId)||ea(),session:this.session,context:this.context,onSigned:this.dispatchSuccessfulTokenResult.bind(this),onCanceled:this.dispatchCancelResult.bind(this),onError:this.dispatchError.bind(this)})}tokenize(e){var t=this;return qa((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new qn([ia]);if(!e||!e.accountHolderName)throw new Sn;var r=t.context.getFeatureFlagValues()[Ti.CanUseAchAuth];if(!function(e,t){switch(t){case Pi.NoSupport:return Va(e);case Pi.Supported:return!0;case Pi.Required:return!Va(e);case Pi.Legacy:return!0;default:return!1}}(e,r))throw new An("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(sn.ON_TOKENIZATION)){var n="Add event listener for '".concat(sn.ON_TOKENIZATION,"' before calling tokenize.");console.warn("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return"intent"in e&&"charge"===e.intent}(e)&&e.bankAccountId)return t.veil=yield Ga(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,total:e.total}));Va(e)||(t.veil=yield Ga());var i=yield t.plaidNonceFlow.run(e);if(Va(e)||r===Pi.Legacy)switch(i.status){case Qr.OK:var o=t.buildSuccessfulTokenResult(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case Qr.CANCEL:var s=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(s),s;default:throw new Fn("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,(a=t.veil)&&(a.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){a.style.opacity="0"})),setTimeout((function(){a.remove()}),160))}var a}))()}destroy(){return this.status=Js.DESTROYED,this.metricsHandler.logEvent(io.Destroyed),this.plaidNonceFlow.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(io.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return qa((function*(){if(e.status===Qr.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"charge":yield r.achAuthFlow.run({bankNonce:e.bankNonce,total:t.total,bankAccountDetails:e.accountDetails});break;case"store":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new An("Unsupported intent ".concat(t.intent,". Must be one of: charge, store"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(ro.FirstInteraction))}buildCancelTokenResult(){return{status:Qr.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:Qr.OK,token:e};return t&&(r.details={bankAccount:t,method:Wr.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(sn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(sn.ON_TOKENIZATION,{tokenResult:e})}}function Va(e){return!("intent"in e)}r(6699),r(2023);var Ya,za,Ka=[Hn,Bn,Gn,jn,bn,Dn,Fn],Wa=[Nn,Gn,Hn,Bn,jn],$a=[qn,Nn],Qa=function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},Za=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(Ya||(Ya={})),function(e){e.CARD_BRAND_CHANGED="cardBrandChanged",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.SET_POSTAL_COUNTRY="setPostalCountry",e.ESCAPE="escape",e.SUBMIT="submit"}(za||(za={}));var Xa=new Set(["DIV","SPAN"]),Ja=new Set(["DIV","SPAN"]),ec=new Set(["DIV","SPAN","BUTTON"]);function tc(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new En(e);r=n}else{if(!(e instanceof HTMLElement))throw new Ln(e,t);if(r=e,!document.contains(r))throw new En(r)}if(!t.has(r.nodeName))throw new Ln(r,t);return r}function rc(e){return tc(e,Xa)}function nc(e){return tc(e,ec)}var ic=["top","right","bottom","left"],oc="sq-focus",sc="sq-error",ac=".".concat(oc),cc=".".concat(sc),uc=(r(3123),r(3210),{ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/}),lc=/\s(?![^(]*\))/,dc=new Set(["screen","all","print","speech"]),pc=new Set(["and"]),hc=new Set(["not","only"]),fc=new Set(["portrait","landscape"]),gc=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),mc=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),Ec=new Set([100,200,300,400,500,600,700,800,900]),vc=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),yc=new Set(["normal"]),_c=new Set(["smaller","larger"]),Ac=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Sc=new Set(["none","antialiased","subpixel-antialiased"]),Cc=new Set(["grayscale","auto"]),Ic=new Set(["none"]);function Tc(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r++),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n++){var i=t.shift();if(void 0===i||!Nc(i))return!1}switch(t.length){case 0:return!0;case 1:return xc(t[0])||Lc(t[0]);case 2:return Lc(t[0])&&(xc(t[1])||Dc(t[1]));case 3:return Lc(t[0])&&Dc(t[1])&&xc(t[2]);default:return!1}}(e)))}function Oc(e){return["border-box","content-box"].includes(e)}function Pc(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||zc(e)||$c(e)}(e)))}function Rc(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(wc)}function wc(e){return 0===Number(e)||zc(e)||$c(e)}function bc(e){return 0===Number(e)||zc(e)||$c(e)||Kc(e)||Qc(e)}function Nc(e){return 0===Number(e)||Yc(e)||Wc(e)}function Dc(e){return 0===Number(e)||Yc(e)||Wc(e)}function Lc(e){return 0===Number(e)||zc(e)||$c(e)}function xc(e){return null!=e&&(function(e){return mc.has(e.toLowerCase())}(e)||function(e){return uc.HEX.test(e)}(e)||function(e){return uc.RGB.test(e)}(e)||function(e){return uc.RGBA.test(e)}(e))}function kc(e){return null!=e&&(function(e){return gc.has(e.toLowerCase())}(e)||function(e){return _c.has(e.toLowerCase())}(e)||zc(e)||Zc(e)||$c(e)||Xc(e))}function Mc(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Ac.has(t);var t}))}function Uc(e){var t=Number(e);return Number.isNaN(t)?vc.has(e.toLowerCase()):Ec.has(t)}function Hc(e){return"normal"===e||Wc(e)||function(e){return Zc(e)||function(e){return uc.NEGATIVE_PT.test(e)}(e)}(e)||Yc(e)}function Bc(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||yc.has(e)||$c(e)||zc(e)||Zc(e)||Xc(e)}function Gc(e){return Sc.has(e)}function jc(e){return Cc.has(e)}function qc(e){return Ic.has(e)}function Fc(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return zc(e)||$c(e)||Xc(e)||0===Number(e)}(e)))}function Vc(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return zc(n)||$c(n)||Xc(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return uc.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return uc.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return fc.has(e)}(n);default:return!1}}function Yc(e){return zc(e)||Kc(e)}function zc(e){return uc.POSITIVE_PX.test(e)}function Kc(e){return uc.NEGATIVE_PX.test(e)}function Wc(e){return $c(e)||Qc(e)}function $c(e){return uc.POSITIVE_EM.test(e)}function Qc(e){return uc.NEGATIVE_EM.test(e)}function Zc(e){return uc.POSITIVE_PT.test(e)}function Xc(e){return uc.POSITIVE_PERCENT.test(e)}var Jc={sanitizeDeclarationValue:function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return xc;case"-webkit-box-shadow":case"box-shadow":return Tc;case"box-sizing":return Oc;case"font-family":return Mc;case"font-size":return kc;case"font-weight":return Uc;case"letter-spacing":return Hc;case"line-height":return Bc;case"padding":return Fc;case"-webkit-font-smoothing":return Gc;case"-moz-osx-font-smoothing":return jc;case"display":return qc;case"border-radius":return Pc;case"border-width":return Rc;case"top":case"bottom":case"left":case"right":return bc;case"width":return function(e){return e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},validateMediaQuery:function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(lc);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(hc.has(t[0])&&(n=1),t.length===n+1)return dc.has(t[n]);if(!dc.has(t[n])||!pc.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?Vc(o):pc.has(o)))return!1;return!0}));var t}};function eu(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Hn(e);var i=Ri.cssProperty(e),o=Jc.sanitizeDeclarationValue(i,t);if(0===o.length)throw new Bn(e,t);return n&&(o+=" !important"),Ri.formatCSSKeyValuePair(i,o)}function tu(e,t,r){var n=[],i=[],o=new Set(e.excludeProperties||[]);for(var[s,a]of Object.entries(t))if(!o.has(s)){var c=a||"";try{n.push(eu(s,c,r))}catch(e){i.push(e)}}if(i.length>0)throw new jn(i);return Object.fromEntries(e.toSelectors.map((function(e){return[e,n]})))}function ru(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(l){var d=u?u(l):l;try{var p=eu(a||o,d,a?[...r,a]:r,s);c.forEach((e=>{n[e]||(n[e]=[]),n[e].push(p)}))}catch(e){i.push(e)}}})),i.length>0)throw new jn(i);return n}var nu={borderChainToDirectionValue:function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},compileStyleString:function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=[...Object.keys(r.selectorMappings),...Object.keys(r.selectorPropertyMappings||{})],a=new Set(s),c=new Set(Object.values(n));Object.keys(t).forEach((e=>{c.has(e)||function(e,t){return!t&&Jc.validateMediaQuery(e)}(e,i)||o.push(new Gn(e))}));var u={};function l(e){for(var[t,r]of Object.entries(e))u[t]||(u[t]=[]),u[t].push(...r)}for(var d of a){var p,h=t[d],f=r.allowedAttributes[d]||[],g=r.selectorMappings[d]||[],m=(null==r||null===(p=r.selectorPropertyMappings)||void 0===p?void 0:p[d])||[];if(h){try{l(tu(g,h,f))}catch(e){e instanceof jn&&o.push(...e.errors)}try{l(ru(m,h,f))}catch(e){e instanceof jn&&o.push(...e.errors)}}}if(Object.keys(t).filter((e=>!a.has(e)&&Jc.validateMediaQuery(e))).forEach((i=>{try{var s=e(t[i],r,n,!0);u[i]=[s]}catch(e){o.push(...e.errors)}})),o.length>0)throw new jn(o);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(u)}},iu="sq-card-iframe-container",ou="sq-card-wrapper",su="sq-card-component",au="sq-card-message",cu="sq-card-message-error",uu="sq-card-message-no-error",lu="sq-visible",du=".".concat(ou),pu=".".concat(su),hu=".".concat(iu),fu="".concat(du).concat(ac),gu="".concat(du).concat(cc),mu="".concat(du," ").concat(pu),Eu="".concat(du," ").concat(hu),vu="".concat(fu," ").concat(hu),yu="".concat(gu," ").concat(hu),_u=".sq-card-message-error",Au=".sq-card-message-error::before",Su=".sq-card-message-no-error",Cu=".sq-card-message-no-error::before",Iu="".concat(hu).concat("::before"),Tu=["borderWidth"];function Ou(e){var t=["".concat(e).concat(cc," ").concat(Iu),"".concat(e).concat(ac," ").concat(Iu)];return ic.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=nu.borderChainToDirectionValue(r,e);return"0"===t[0]?t:"-".concat(t)})};var r}))}function Pu(e,t){return nu.compileStyleString(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Fr.CARD_COMPONENT]:si,[Fr.CARD_COMPONENT_FOCUS]:ai,[Fr.CARD_COMPONENT_ERROR]:ai,[Fr.CARD_INPUT_HELPER_TEXT]:ci,[Fr.CARD_INPUT_HELPER_ICON]:ui,[Fr.CARD_INPUT_ERROR_TEXT]:ci,[Fr.CARD_INPUT_ERROR_ICON]:ui},selectorMappings:{[Fr.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Eu)]},[Fr.CARD_COMPONENT_FOCUS]:{excludeProperties:Tu,toSelectors:["".concat(t).concat(vu)]},[Fr.CARD_COMPONENT_ERROR]:{excludeProperties:Tu,toSelectors:["".concat(t).concat(yu)]},[Fr.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(Su)]},[Fr.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Cu)]},[Fr.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(_u)]},[Fr.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Au)]}},selectorPropertyMappings:{[Fr.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Eu)]}],[Fr.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(Iu),"".concat(t).concat(mu)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Eu)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=nu.borderChainToDirectionValue(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Ou(t)],[Fr.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(cc," ").concat(Iu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(cc," ").concat(Iu)]}],[Fr.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(ac," ").concat(Iu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(ac," ").concat(Iu)]}],[Fr.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Au)]}],[Fr.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Cu)]}]}}}(t),Fr)}var Ru={addStyleElement:function(e,t,r,n){if(Ru.hasExistingStyleElement(t))r&&r();else{var i=document.createElement("link");r&&(i.onload=r),n&&(i.onerror=t=>{n(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))}),i.href=e,i.rel="stylesheet",i.type="text/css",i.id=t,document.head.appendChild(i)}},hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}},wu=Ru;function bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(r),!0).forEach((function(t){Du(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Du(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function xu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Lu(o,n,i,s,a,"next",e)}function a(e){Lu(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ku="single-card-wrapper",Mu="emptyMessage",Uu=[qr.CARD_NUMBER,qr.EXPIRATION_DATE,qr.CVV,qr.POSTAL_CODE];function Hu(e){return"".concat(ku,"-").concat(e)}function Bu(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Pu(e,Hu(t))}var Gu=class extends ra{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Wr.CARD,this.postalCountry=yo.US,this.onResize=this.onResize.bind(this),this.id=ea(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new sa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return xu((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent(io.ConfigUpdated,r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Bu(r.style,t.id);try{return void(yield t.paymentMessenger.request(Ya.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType}))}catch(e){if(Ri.isInstanceOf(e,Wa))throw e;throw t.errorLogger.captureException(e),new Fn("configuring the Card Element")}}))()}attach(e){var t=this;return xu((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Js.ATTACHED,t.metricsHandler.logEvent(ro.AttachStart),t.metricsHandler.logEvent(io.Configured,t.initialOptions);try{r=rc(e)}catch(e){throw t.metricsHandler.logEvent(ro.AttachError),t.status===Js.ATTACHED&&(t.status=Js.DETACHED),e}try{return t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),void t.metricsHandler.logEvent(ro.AttachOK)}catch(e){if(t.status===Js.ATTACHED&&(t.status=Js.DETACHED),t.metricsHandler.logEvent(ro.AttachError),Ri.isInstanceOf(e,Ka))throw e;throw t.errorLogger.captureException(e),new Fn("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Js.DETACHED,io.Detached)}destroy(){var e=this;return xu((function*(){if(e.status===Js.DESTROYED)return!1;var t=yield e.detachElement(Js.DESTROYED,io.Destroyed);return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return xu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(qr).includes(e))throw new In(e);t.metricsHandler.logEvent(io.Focused,e);try{return yield t.paymentMessenger.request(Ya.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return xu((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(Ya.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(io.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(io.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return xu((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new qn([ia]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(Ya.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{card:t,method:Wr.CARD,billing:r},status:Qr.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Bi)return{errors:t.errors,status:Qr.INVALID};throw Ri.isInstanceOf(t,$a)?t:(e.errorLogger.captureException(t),Gi())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent(io.RecalculatedSize),this.onResize()}setError(e){var t=this;return xu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(qr).includes(e))throw new In(e);t.metricsHandler.logEvent(io.SetError,e);try{return yield t.paymentMessenger.request(Ya.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return xu((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Ya.LOAD_CARDS_FORM,{configuration:Nu(Nu({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new Tn(r);if(t[r]&&!t[r](n))throw new On(r,n)}))}buildErrorMessage(e){switch(e){case qr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case qr.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case qr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case qr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case qr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case qr.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case qr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case qr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:Mu,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(cu),this.cardDetail.classList.add(uu)):(e=Uu.find((e=>this.errorList.has(e)))||Mu,t=this.buildErrorMessage(e),this.cardDetail.classList.add(cu),this.cardDetail.classList.remove(uu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(lu):this.cardDetail.classList.remove(lu))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(oc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(sc))}handleInputEvent(e){var t,r,{data:n}=e,i=n.payload.body;switch(i.eventType){case jr.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(sc);break;case jr.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case jr.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(r=this.wrapperElement)||void 0===r||r.classList.add(oc);break;case jr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[za.SET_POSTAL_COUNTRY]:t,[za.FOCUS_CLASS_ADDED]:e,[za.FOCUS_CLASS_REMOVED]:e,[za.ERROR_CLASS_ADDED]:e,[za.ERROR_CLASS_REMOVED]:e,[za.CARD_BRAND_CHANGED]:e,[za.POSTAL_CODE_CHANGED]:e,[za.SUBMIT]:e,[za.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return Qa({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:y.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return xu((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Hu(t.id),t.wrapperElement.classList.add(ou),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(au),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(iu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(su),t.wrapperElement.appendChild(t.cardDetail),wu.addStyleElement(y.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Bu(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return xu((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(Ya.DESTROY);return r.element&&(Za(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}};function ju(e){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(e),type:"UNKNOWN"}}r(9601);var qu,Fu=function(e){window.localStorage&&window.localStorage.removeItem(e)},Vu=function(e){if(window.localStorage){var t,r=window.localStorage.getItem(e);if(!r)return null;try{t=JSON.parse(r)}catch(e){return null}return{key:e,value:t}}return null},Yu=function(e){window.localStorage&&window.localStorage.setItem(e.key,JSON.stringify(e.value))};!function(e){e.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",e.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(qu||(qu={}));var zu=["state","code","access_token"],Ku=new Set(["iPhone Simulator","iPod Simulator","iPhone","iPod"]),Wu={CASH_APP_OAUTH_PARAMS:zu,extractCashAppParamsFromURI:function(e,t){var r=new URL(e),n=0,i=[];zu.forEach((e=>{r.searchParams.get(e)&&(n++,i.push(e),r.searchParams.delete(e))}));var o=r.searchParams.get("error");return o&&r.searchParams.delete("error"),!o&&n>0&&n!==zu.length&&t.captureException(new Ki("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(zu.toString(),"]"))),r.toString()},findAndRemoveQueryParams:function(e,t){var r={};if(!window.URLSearchParams)return r;var n=new URLSearchParams(e),i=t.length,o=0;if(t.forEach((e=>{r[e]=n.get(e),r[e]&&o++})),i===o){var s=new URLSearchParams(e);t.forEach((e=>{s.delete(e)}));var a="?".concat(s.toString()),c=g.windowHash;c&&(a+="".concat(c)),g.replaceWindowState(a)}return r},isIOS:function(){return Ku.has(window.navigator.platform)||/iPhone|iPod/.test(navigator.userAgent)&&"ontouchend"in document}};class $u extends an{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,$u.prototype)}}function Qu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Zu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Qu(o,n,i,s,a,"next",e)}function a(e){Qu(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Xu{constructor(){this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),wu.addStyleElement(y.CASH_APP_STYLES,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var t=this;return Zu((function*(){yield t.stylesLoadedPromise;var r,n=document.createElement("button"),i=document.createElement("img");return i.setAttribute("src",(r=e.theme===Xn.DARK?"fff":"000","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(r,"'/%3E%3C/svg%3E"))),n.classList.add("sq-cash-button",function(e){switch(e){case Jn.ROUNDED:return"sq-cash-button-rounded";case Jn.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),function(e){return e===Xn.DARK?"sq-cash-button-dark":"sq-cash-button-light"}(e.theme)),n.appendChild(i),n}))()}createQrCodeContainer(e){var t=this;return Zu((function*(){if(yield t.stylesLoadedPromise,!Ri.isValidUrl(e))throw new $u;var r=new URL(e);r.searchParams.set("rounded","0");var n=document.createElement("div");n.classList.add("sq-cash-qr-container");var i=document.createElement("div");i.classList.add("col-left");var o=document.createElement("div");o.classList.add("col-right");var s=document.createElement("div");s.classList.add("sq-cash-qr-instruction"),s.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var a=document.createElement("div"),c=document.createElement("img");a.classList.add("sq-cash-qr-guide"),c.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),a.appendChild(c),i.appendChild(s),i.appendChild(a);var u=document.createElement("img");return u.classList.add("sq-cash-qr-code"),u.setAttribute("src",r.toString()),o.appendChild(u),n.appendChild(i),n.appendChild(o),n}))()}}function Ju(e,t,r){return{details:{cashApp:{cashtag:e,transactionId:t},method:Wr.CASH_APP},status:Qr.OK,token:r}}function el(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function tl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){el(o,n,i,s,a,"next",e)}function a(e){el(o,n,i,s,a,"throw",e)}s(void 0)}))}}var rl="sq-cash-app-redirect-payment-method-tracking-id";class nl extends ra{constructor(e,t){if(super(e),this.methodType=Wr.CASH_APP,this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=g.isAndroid()||Wu.isIOS(),this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new sa(this.context),this.cashAppClient=new Xu,!this.session.locationId)throw new An("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.redirectURI)throw new An("redirectURI missing");if(!e.transactionId)throw new An("transactionId missing");if(t){if(!e.totalTransactionAmount)throw new An("totalTransactionAmount required");if(!Number.isInteger(e.totalTransactionAmount.amount)||e.totalTransactionAmount.amount<=0)throw new An("totalTransactionAmount.amount must be a positive integer")}}(t),t.transactionId.length>50)throw new An("transactionId too long. Should be less than ".concat(50," characters."));var r=Wu.extractCashAppParamsFromURI(t.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,r,t.transactionId,t.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(io.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve(!0)}attachAll(e,t){var r=this;return tl((function*(){r.metricsHandler.logEvent(ro.AttachStart);try{if(e.button){var n=yield r.cashAppClient.createCashAppButton(Object.assign({shape:Jn.ROUNDED,theme:Xn.DARK},null==t?void 0:t.button));r.elements.button=r.validateAndQuerySelector(e.button),r.elements.button.appendChild(n)}return r.elements.qrCode=r.validateAndQuerySelector(e.qrCode),void r.metricsHandler.logEvent(ro.AttachOK)}catch(e){throw r.metricsHandler.logEvent(ro.AttachError),e}}))()}tokenize(){var e=this;return tl((function*(){e.handleFirstInteraction();var{qrCode:t}=e.elements;if(!t)throw new Nn(e.methodType);try{var r,n=yield wr((()=>e.fetchAuthURLsPromise),_i.minutesToMs(1),new $i("Precondition failed",e.methodType));if(n.error)throw n.error;if(!e.transactionId)throw new $i("expected transactionId to exist at tokenization",e.methodType);if(e.willRedirect){var i={paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId};return Yu({key:rl,value:i}),g.redirectTo(n.redirectURL),new Promise((()=>{}))}var o=yield e.cashAppClient.createQrCodeContainer(n.qrURL);t.appendChild(o);var{token:s,cashtag:a,paymentMethodTrackingId:c,sessionId:u}=yield e.paymentMethodMessenger.request(qu.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{expiresAt:Date.now()+_i.secondsToMs(n.expiresIn),requestBody:{analytics_token:null!==(r=e.session.analyticsToken)&&void 0!==r?r:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:y.VERSION,website_url:e.session.sourceUrl}});return yield e.context.updateSession(u),e.context.setPaymentMethodTrackingId(c),Ju(a,e.transactionId,s)}catch(t){return t instanceof $u&&e.errorLogger.captureException(t),oa(t,e.errorLogger)}}))()}getRedirectResult(){var e=this;return tl((function*(){var t,{error:r}=Wu.findAndRemoveQueryParams(window.location.search,["error"]);if(r){var n=new qn([ju(r)]);return e.errorLogger.captureException(n),oa(n,e.errorLogger)}var i,o,s,a,{state:c,code:u,access_token:l}=Wu.findAndRemoveQueryParams(window.location.search,Wu.CASH_APP_OAUTH_PARAMS);if(!c||!u||!l)return null;try{o=function(e){var{transaction_id:t}=JSON.parse(e);if(void 0===t)throw new Ki("Malformed state in redirect query params: ".concat(e));return t}(c);var d=function(e){var t=e.split(":");if(t.length<3)throw new Ki("Invalid transaction ID: could not separate");return t}(o);i=d[0],s=d[1]}catch(t){return oa(t,e.errorLogger)}var p=Vu(rl);null!==p&&o===(null===(t=p.value)||void 0===t?void 0:t.transactionId)&&(a=p.value.paymentMethodTrackingId),Fu(rl);var h=t=>{e.context.metricsHandler.metricsLogger.logEvent({event:t,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,i,a)};h(ro.NonceStart);try{var f=yield e.messenger.request(qu.REQUEST_CASH_APP_CUSTOMER,{session:Object.assign({},e.session,{paymentMethodTrackingId:a,sessionId:i}),body:l}),g=e.generateWalletToken(i,u,o,a);return h(ro.NonceOK),Ju(f,s,g)}catch(t){return h(ro.NonceError),oa(t,e.errorLogger)}}))()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var t=document.querySelector(e);if(null===t)throw new En(e);return t}fetchAuthURLs(e,t,r,n){var i=this;this.fetchAuthURLsPromise=tl((function*(){var o,s={expiresIn:-1,qrURL:"",redirectURL:""},a=1e3,c=i.willRedirect?t:void 0,u=n?{amount:n.amount,currency_code:n.currencyCode}:void 0,l={client_id:i.session.applicationId,location_id:e,redirect_uri:c,total_transaction_amount:u,transaction_id:r};try{var{expires_in:d,qr_url:p,redirect_url:h,transaction_id:f}=yield i.paymentMethodMessenger.request(qu.REQUEST_CASH_APP_AUTH,l);i.transactionId=f,s.expiresIn=d,s.qrURL=p,s.redirectURL=h,o=d,a=Math.max(_i.secondsToMs(o)-_i.minutesToMs(1),_i.minutesToMs(1)),i.willRedirect||(i.preloadedQRImage.src=p),s.expiresIn<2147483647?i.authTimeoutId=window.setTimeout((()=>{i.errorLogger.captureException(new $i("Cash App Auth URLS expired unexpectedly with expiry of ".concat(a,"ms"),Wr.CASH_APP))}),a):i.errorLogger.captureException(new $i("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(s.expiresIn,"ms"),Wr.CASH_APP))}catch(e){s.error=e}return s}))()}generateWalletToken(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:n,session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:t,transaction_id:r},websdk_version:y.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(ro.FirstInteraction))}}var il,ol=[Hn,Bn,Gn,jn,bn,Fn];function sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(r),!0).forEach((function(t){cl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cl(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ul(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function ll(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ul(o,n,i,s,a,"next",e)}function a(e){ul(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(il||(il={}));var dl="gift-card-wrapper",pl=[Vr.GIFT_CARD_NUMBER];class hl extends ra{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Wr.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=ea(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new sa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return ll((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Js.ATTACHED,t.metricsHandler.logEvent(ro.AttachStart),t.metricsHandler.logEvent(io.Configured,t.initialOptions);try{r=rc(e)}catch(e){throw t.metricsHandler.logEvent(ro.AttachError),t.status===Js.ATTACHED&&(t.status=Js.DETACHED),e}try{return t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),void t.metricsHandler.logEvent(ro.AttachOK)}catch(e){if(t.status===Js.ATTACHED&&(t.status=Js.DETACHED),t.metricsHandler.logEvent(ro.AttachError),Ri.isInstanceOf(e,ol))throw e;throw t.errorLogger.captureException(e),new Fn("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Js.DETACHED,io.Detached)}destroy(){return this.status===Js.DESTROYED?Promise.resolve(!1):this.detachElement(Js.DESTROYED,io.Destroyed)}configure(e){var t=this;return ll((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&gl(e.style,t.id),t.metricsHandler.logEvent(io.ConfigUpdated,e);try{return void(yield t.paymentMessenger.request(il.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType}))}catch(e){if(Ri.isInstanceOf(e,Wa))throw e;throw t.errorLogger.captureException(e),new Fn("configuring the Gift Card Element")}}))()}focus(e){var t=this;return ll((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Vr).includes(e))throw new In(e);t.metricsHandler.logEvent(io.Focused,e);try{return yield t.paymentMessenger.request(il.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return ll((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(il.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(io.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(io.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return ll((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new qn([ia]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(il.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Wr.GIFT_CARD},status:Qr.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Bi)return{errors:t.errors,status:Qr.INVALID};throw Ri.isInstanceOf(t,$a)?t:(e.errorLogger.captureException(t),Gi())}}))()}setError(e){var t=this;return ll((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Vr).includes(e))throw new In(e);t.metricsHandler.logEvent(io.SetError,e);try{return yield t.paymentMessenger.request(il.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return ll((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(il.LOAD_GIFT_CARDS_FORM,{configuration:al(al({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new Tn(r);if(t[r]&&!t[r](n))throw new On(r,n)}))}buildCardElement(e){var t=this;return ll((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=fl(t.id),t.wrapperElement.classList.add(ou),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(au),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(iu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(su),t.wrapperElement.appendChild(t.cardDetail),wu.addStyleElement(y.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&gl(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return Qa({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:y.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(cu),this.cardDetail.classList.add(uu)):(e=pl.find((e=>this.errorList.has(e)))||pl[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(cu),this.cardDetail.classList.remove(uu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(lu):this.cardDetail.classList.remove(lu))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var t,r,{data:n}=e,i=n.payload.body;switch(i.eventType){case Yr.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(sc);break;case Yr.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case Yr.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(r=this.wrapperElement)||void 0===r||r.classList.add(oc);break;case Yr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(oc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(sc))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[za.FOCUS_CLASS_ADDED]:e,[za.FOCUS_CLASS_REMOVED]:e,[za.ERROR_CLASS_ADDED]:e,[za.ERROR_CLASS_REMOVED]:e,[za.CARD_BRAND_CHANGED]:e,[za.SUBMIT]:e,[za.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===Vr.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===Vr.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return ll((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(il.DESTROY);return r.element&&(Za(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function fl(e){return"".concat(dl,"-").concat(e)}function gl(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Pu(e,fl(t))}class ml extends an{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,ml.prototype)}}function El(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class vl extends Zs{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners)for(var n=new Vn(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=o[a](n)}catch(t){throw new _n(e,t.message)}if(t instanceof Promise)try{i=yield wr((()=>t),3e4,new ml(e))}catch(t){if(t instanceof ml)throw t;throw new _n(e,t.message)}else i=t;r&&r(i)},a=0,c=o.length;a<c;a++)yield*s()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){El(o,r,i,s,a,"next",e)}function a(e){El(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}function yl(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var{isValid:s,missingFields:a}=yl("object"==typeof e[i]?e[i]:{},t[i]);return a.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),s}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every((e=>e)),missingFields:r}}function _l(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=yl({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}r(5827);var Al,Sl,Cl,Il={amount:"string",label:"string"},Tl={amount:"string",id:"string",label:"string"},Ol={amount:"string",label:"string"},Pl={};function Rl(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,s=!1,a=[],c=r,u=n,l=o,d=wl(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(c||(c=t.lineItems),u||(u=t.taxLineItems),d||(d=wl(t.discounts)),l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(s=!0,a.push(...e))})),s?a:void 0}function wl(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function bl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Nl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){bl(o,n,i,s,a,"next",e)}function a(e){bl(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ll(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UPDATE="update"}(Al||(Al={}));class xl{constructor(e,t,r){this.eventTarget=new vl,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:n,missingFields:i}=Ml(this);if(!n)throw new vn(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(r),!0).forEach((function(t){Ll(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),r=new xl(t,this.localeStrings,this.updateLock),{isValid:n,missingFields:i}=Ml(r);if(!n)throw new vn(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Al.UPDATE,r),this.logMetrics(io.ConfigUpdated,t),!0)}addEventListener(e,t){switch(Ri.enumValues($r).includes(e)&&this.logMetrics(io.EventListenerAdded,e),e){case $r.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case $r.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Al.UPDATE:this.updateEventListener(t);break;case on.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case on.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new $s("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(Ri.enumValues(on).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=_l(e.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=yl({"shippingOptions.total":r.total},{"shippingOptions.total":Ol})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=_l(r.taxLineItems,"shippingOptions.taxLineItems",Il)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new yn(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=_l(t,"lineItem",Il);if(!u.isValid)return u}if(r){var l=_l(r,"discounts",Il);if(!l.isValid)return l}if(n){var d=_l(n,"taxLineItems",Il);if(!d.isValid)return d}if(i){var p=_l(i,"shippingLineItems",Il);if(!p.isValid)return p}if(s){var h=_l(s,"shippingOption",Tl);if(!h.isValid)return h}if(c){var f=yl({total:c},{total:Ol});if(!f.isValid)return f}if(a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=yl(o,Pl);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new yn(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener($r.SHIPPING_CONTACT_CHANGED,function(){var r=Nl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener($r.SHIPPING_OPTION_CHANGED,function(){var r=Nl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(on.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=Nl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(on.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(Al.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){void 0!==this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function kl(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function Ml(e){return yl(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}class Ul{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}class Hl extends an{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,Hl.prototype)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(Sl||(Sl={})),function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides"}(Cl||(Cl={}));class Bl{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,applicationId:n,avt:i,hostname:o,locationId:s,instanceId:a,sessionId:c,sourceUrl:u,locale:l}=e;this.applicationId=n,this.locationId=s,this._sessionId=c,this.instanceId=a,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.hostname=o,this.sourceUrl=u,this._locale=l,this.avt=i}get analyticsToken(){return this._analyticsToken}get sessionId(){return this._sessionId}setSessionId(e){this.setAttribute(Cl.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Cl.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Cl.LOCALE,e)}setAnalyticsToken(e){this.setAttribute(Cl.ANALYTICS_TOKEN,e)}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides)),this.serialized}setAttribute(e,t){(this.isValueString(t)||e===Cl.TRANSLATION_OVERRIDES)&&(this[e]=t),this.serialized=void 0}isValueString(e){return"string"==typeof e}}var Gl=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(y.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}(e);return Qa({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},jl=function(e){var t=new(ho[e.name]||an);return t.fromSerializedError(e),t},ql=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class Fl extends Na{constructor(e){super({name:e,errorSerializer:{serialize:e=>e instanceof an?ql(e):e,deserialize:e=>e instanceof Error?e:jl(e)}})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,s,a,c,u;void 0!==n&&(i=null===(s=n.data.payload)||void 0===s||null===(a=s.session)||void 0===a?void 0:a.instanceId,o=null===(c=n.data.payload)||void 0===c||null===(u=c.session)||void 0===u?void 0:u.sessionId),r instanceof Ia?t.logEvent({event:oo.IframeMessengerTimeoutError,eventSource:lo.App,internalConfigurationValues:r.message},i,o):e.captureException(r)}))}}function Vl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Yl(){var e;return e=function*(e,t,r,n,i){var o=new Fl(i);return o.setErrorLogger(t,r),o.connect({origin:y.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage("INITIALIZE",n),o},Yl=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Vl(o,n,i,s,a,"next",e)}function a(e){Vl(o,n,i,s,a,"throw",e)}s(void 0)}))},Yl.apply(this,arguments)}var zl={build:function(e,t,r,n,i){return Yl.apply(this,arguments)}};function Kl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Wl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Kl(o,n,i,s,a,"next",e)}function a(e){Kl(o,n,i,s,a,"throw",e)}s(void 0)}))}}function $l(){return($l=Wl((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:ro.InitializeStart,eventSource:lo.App});var c,u,l=n.getCurrentLocale();try{c=yield Gl({applicationId:i,hostname:s})}catch(e){if(t.logEvent({event:ro.InitializeError,eventSource:lo.App}),r.captureException(e),to(e))throw new Fn("initializing the payment method");throw e}try{u=yield zl.build(c,r,t,{applicationId:i,hostname:s,locale:l,locationId:o})}catch(e){if(t.logEvent({event:ro.InitializeError,eventSource:lo.App}),r.captureException(e),to(e))throw new Fn("initializing the payment method");throw e}try{var{avt:d,sessionId:p,applePartnerInternalMerchantIdentifier:h,cashAppPayMerchantIdentifier:f,instanceId:g,paymentMethodSupportDetail:m,featureFlagValues:E}=yield u.request(Sl.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}});t.setAvt(d);var v=new Bl({applePayMerchantIdentifier:h,cashAppPayMerchantIdentifier:f,applicationId:i,avt:d,hostname:s,instanceId:g,locale:l,locationId:o,sessionId:p,sourceUrl:a});return t.logEvent({event:ro.InitializeOK,eventSource:lo.App,internalConfigurationValues:E},g,p),{featureFlagValues:E,localeStrings:n,messenger:u,paymentMethodSupportDetail:m,session:v}}catch(e){if(t.logEvent({event:ro.InitializeError,eventSource:lo.App}),to(e))throw new Fn("initializing the payment method");throw e}}))).apply(this,arguments)}function Ql(){return(Ql=Wl((function*(e,t,r){var{applicationId:n,locationId:i,sourceUrl:o}=e.serialize();try{var s=yield Us.getToken({applicationId:n,locationId:i,websiteUrl:o});e.setAnalyticsToken(s)}catch(e){e instanceof Un&&t.captureException(e),r&&window.clearInterval(r)}}))).apply(this,arguments)}var Zl,Xl,Jl={initializeAnalytics:function(e,t,r){return Ql.apply(this,arguments)},initializePayment:function(e,t,r,n){return $l.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return e.billingContact&&"object"==typeof e.billingContact||r.push(new $s(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE"].includes(e.intent)||r.push(new $s(t,"details.intent","string")),"CHARGE"===e.intent&&(e.amount&&"string"==typeof e.amount||r.push(new $s(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new $s(t,"details.currencyCode","string"))),r}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Zl||(Zl={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(Xl||(Xl={}));var ed,td={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function rd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(r),!0).forEach((function(t){id(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function id(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PENDING="pending",e.FINAL="final"}(ed||(ed={}));var od={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},sd=["visa","masterCard","jcb","discover","amex"];function ad(e){return{amount:e.amount,label:e.label,type:e.pending?ed.PENDING:ed.FINAL}}function cd(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function ud(e,t){return t?ad(t):e}function ld(e,t){return t?t.map(ad):e}function dd(e,t){return t?t.map(cd):e}function pd(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function hd(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:o&&o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function fd(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function gd(e,t,r){return{errors:(n=e,i=[],n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,r]=e,n=od[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",n,r))})),i),newLineItems:ld(t.lineItems,Rl(e,r)),newShippingMethods:dd(t.shippingMethods,e.shippingOptions),newTotal:ud(t.total,e.total)};var n,i}function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?md(Object(r),!0).forEach((function(t){vd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):md(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){yd(o,n,i,s,a,"next",e)}function a(e){yd(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Ad extends ra{constructor(e,t,r){if(super(t),this.methodType=Wr.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new sa(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new kn(Fs);if(!window.ApplePaySession.canMakePayments())throw new kn(Vs);this.validateConfiguration()}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new $i(e,"Apple Pay")),new Fn(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}tokenize(){var e=this;return _d((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new qn([ia]);e.applePayPaymentRequest=function(e,t){var r=[...sd];null!=t&&t.isActive(Ti.CanUseInterac)&&r.push("interac");var n,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:ld([],Rl(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:dd([],e.shippingOptions),supportedNetworks:r,total:ad(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:td[n.countryCode],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(pd(),e.applePayPaymentRequest);var t=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=r=>{t(r.shippingContact,e.applePayPaymentRequest)};var r=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=t=>{r(t.shippingMethod,e.applePayPaymentRequest)};var n=new Promise((t=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(no.ExternalSessionCancel),e.deleteApplePaySession(),t({status:Xl.CANCEL})}})),i=new Promise(((t,r)=>{e.applePaySession.onvalidatemerchant=function(){var n=_d((function*(n){try{var i=yield e.requestApplePayMerchantValidity(n.validationURL,e.applePayPaymentRequest);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()})),o=new Promise(((t,r)=>{e.applePaySession.onpaymentauthorized=function(){var n=_d((function*(n){try{var i=yield e.requestApplePayCardNonce(n);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),r(t)}}));return function(e){return n.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(no.ExternalSessionStart),e.applePaySession.begin();try{var s=yield i;e.applePaySession.completeMerchantValidation(s);var{status:a,token:c,details:u}=yield Promise.race([o,n]);return e.metricsHandler.logEvent(no.ExternalSessionOK),a===Xl.SUCCESS?{details:u,status:Qr.OK,token:c}:{status:Qr.CANCEL}}catch(t){throw e.metricsHandler.logEvent(no.ExternalSessionError),t}}))()}destroy(){return this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),this.status=Js.DESTROYED,this.metricsHandler.logEvent(io.Destroyed),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new kn(zs,"applePayMerchantIdentifier");if(!e.locationId)throw new kn(zs,"locationId")}requestApplePayCardNonce(e){var t=this;return _d((function*(){var r={applepayData:e.payment},n=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var i=yield t.paymentMethodMessenger.request(Zl.REQUEST_APPLE_PAY_CARD_NONCE,r);return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,yield t.context.updateSession(i.sessionId),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Wr.APPLE_PAY},status:Xl.SUCCESS,token:n};if(i){var a={contact:i};t&&(a.option=fd(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(i,n)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e instanceof qn||t.errorLogger.captureException(e),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return _d((function*(){var n,i=t&&t.total?t.total.label:null,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(Zl.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),e}try{return JSON.parse(n.session)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),r.errorLogger.captureException(new $i(e.message,r.methodType)),new Fn("parsing Apple Pay merchant validity")}}))()}shippingContactChanged(e,t){var r=pd()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener($r.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent($r.SHIPPING_CONTACT_CHANGED,{contactOrOption:hd(e)},(e=>{this.metricsHandler.logEvent(io.EventListenerOnCompleteResponse,Ed(Ed({},e),{},{eventName:$r.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=fd(i)),void 0!==n&&this.req.hasEventListener($r.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=cd(n),this.req.dispatchEvent($r.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent(io.EventListenerOnCompleteResponse,Ed(Ed({},t),{},{eventName:$r.SHIPPING_OPTION_CHANGED})),e(Object.assign({},r,t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=pd()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener($r.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent($r.SHIPPING_OPTION_CHANGED,{contactOrOption:fd(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var r=gd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(no.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=gd(r,n,i),nd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(no.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(s.status,s.newShippingMethods,s.newTotal,s.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var r,n,i,o=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,{newLineItems:ld(n.lineItems,Rl(r,i)),newTotal:ud(n.total,r.total)});t.updateApplePayPaymentRequest(o),t.metricsHandler.logEvent(no.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(o)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=gd(r,n,i),nd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(no.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(s.status,s.newTotal,s.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(ro.FirstInteraction),this.wasFirstInteractionCalled=!0)}}function Sd(e,t){return Intl.NumberFormat(g.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}var Cd=["PAN_ONLY","CRYPTOGRAM_3DS"],Id=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"],Td="LINE_ITEM";function Od(e){return{label:e.label,price:e.amount,status:e.pending?s.Estimated:s.Final,type:Td}}function Pd(e,t){var r=null!=t?t:e;return r?r.map((e=>Od(e))):[]}function Rd(e,t){return t.map((t=>function(e,t){return{description:Sd(t.amount,e),id:t.id,label:t.label}}(e,t)))}function wd(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:Rd(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function bd(e,t){return null==t?void 0:t.find((t=>t.id===e))}function Nd(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:p,requestShippingContact:h,shippingOptions:f}=t,g=kl(t),m=Boolean(h||g),E=Object.assign({},e,{emailRequired:Boolean(p),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(E.transactionInfo.displayItems=Pd([],Rl({lineItems:u,taxLineItems:l,discounts:d},t))),m&&(E.shippingAddressParameters={phoneNumberRequired:!0}),g){var v=wd(a,o,[],f);v&&(E.shippingOptionParameters=v)}return r.length>0&&(E.callbackIntents=r),E}function Dd(e,t){var r=[];return e.error&&r.push({intent:t,message:e.error,reason:Zn.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:Zn.SHIPPING_ADDRESS_INVALID})})),r}function Ld(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(r),!0).forEach((function(t){kd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ld(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Md(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ud(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Md(o,n,i,s,a,"next",e)}function a(e){Md(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Hd,Bd,Gd,jd,qd=["#google"];class Fd extends ra{constructor(e,t,r,n,i){var o;super(r),this.methodType=Wr.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new sa(r),kl(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=kl(e)&&t.includes($r.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes($r.SHIPPING_CONTACT_CHANGED);return n?r.push(a.SHIPPING_ADDRESS,a.SHIPPING_OPTION):i&&r.push(a.SHIPPING_ADDRESS),(!g.isAndroid()||n||i)&&r.push(a.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var s,p,h,f,m=function(e,t,r){var n={environment:y.GOOGLE_PAY_ENV,merchantInfo:r},i=e.includes(a.SHIPPING_OPTION)||e.includes(a.SHIPPING_ADDRESS);if(!g.isAndroid()||i){var o={onPaymentAuthorized:()=>({transactionState:d.SUCCESS})};i&&(o.onPaymentDataChanged=t),n.paymentDataCallbacks=o}return n}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(m),this.isReadyToPayRequest=(s=this.session.applicationId,p=this.req.requestBillingContact,h=this.featureFlagHandler,f=[...Id],null!=h&&h.isActive(Ti.CanUseInterac)&&f.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:Cd,allowedCardNetworks:f,billingAddressParameters:{format:p?c.FULL:c.MIN,phoneNumberRequired:Boolean(p)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:s},type:l.PAYMENT_GATEWAY},type:u.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener($r.SHIPPING_OPTION_CHANGED)&&e.push($r.SHIPPING_OPTION_CHANGED),this.req.hasEventListener($r.SHIPPING_CONTACT_CHANGED)&&e.push($r.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return Ud((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=Js.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:Wn.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:$n.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Qn.LONG;r.metricsHandler.logEvent(ro.AttachStart),r.metricsHandler.logEvent(io.Configured,t);try{r.element=nc(e)}catch(e){throw r.status===Js.ATTACHED&&(r.status=Js.DETACHED),r.metricsHandler.logEvent(ro.AttachError),e}r.isReadyToPay=yield r.checkIfReadyToPay(ro.AttachError);try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});return r.element.appendChild(u),void r.metricsHandler.logEvent(ro.AttachOK)}catch(e){throw r.status===Js.ATTACHED&&(r.status=Js.DETACHED),r.errorLogger.captureException(e),r.metricsHandler.logEvent(ro.AttachError),r.status=Js.DETACHED,new kn(Ks,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Js.DETACHED,io.Detached),Promise.resolve()}destroy(){return this.status===Js.DESTROYED?Promise.resolve(!1):(this.detachElement(Js.DESTROYED,io.Destroyed),Promise.resolve(!0))}tokenize(){var e=this;return Ud((function*(){var t;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent(no.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(no.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(no.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(no.ExternalSessionCancel),{status:Qr.CANCEL};if(e.metricsHandler.logEvent(no.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new $i(JSON.stringify(t),e.methodType)),new Fn("tokenizing Google Pay.")}var{token:r,details:n}=yield e.requestGooglePayCardNonce(t);return{details:n,status:Qr.OK,token:r}}))()}validateConfiguration(){var e=qd.join(", ");if(document.querySelectorAll(e).length>0)throw new xn(this.methodType,e)}checkIfReadyToPay(e){var t=this;return Ud((function*(){var r=!1;try{var{result:n}=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest);r=n}catch(e){t.errorLogger.captureException(e)}if(r){var i=t.callbackIntents.length>0?s.Unknown:s.Final;return t.googlePayClient.prefetchPaymentData(Nd(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}throw t.metricsHandler.logEvent(e),new kn(Ys)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Nd(this.isReadyToPayRequest,this.req,this.callbackIntents,s.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case a.INITIALIZE:case a.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case a.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new $i("Unknown callbackTrigger: ".concat(e.callbackTrigger),Wr.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return Ud((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes($r.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=bd(e,t);return i?this.status===Js.DESTROYED?Promise.resolve({optionErrors:[{intent:a.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Zn.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent($r.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent(io.EventListenerOnCompleteResponse,xd(xd({},t),{},{eventName:$r.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent(no.ShippingOptionChangeOK),e({optionErrors:Dd(t,a.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return Ud((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,o=t.shippingOptions;void 0!==r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},r,s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes($r.SHIPPING_CONTACT_CHANGED)?this.status!==Js.DESTROYED?this.req.dispatchEvent($r.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent(io.EventListenerOnCompleteResponse,xd(xd({},e),{},{eventName:$r.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent(no.ShippingAddressChangeOK),n({contactErrors:Dd(e,a.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:a.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Zn.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=Od(null!==(i=e.total)&&void 0!==i?i:o),l={totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Object.assign({},{countryCode:s,currencyCode:a},l),p=Pd(Rl(t),Rl(e,t));p.length>0&&(d.displayItems=p);var h={newTransactionInfo:d},f=wd(a,n,c,e.shippingOptions);return f&&(h.newShippingOptionParameters=f),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return Ud((function*(){var r=bd(t.selectedShippingOptionId,t.shippingOptions);try{var n=yield t.paymentMethodMessenger.request(Xs.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),yield t.context.updateSession(n.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Wr.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof qn||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(ro.FirstInteraction))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Hd||(Hd={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(Bd||(Bd={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(Gd||(Gd={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(jd||(jd={}));var Vd="sq-afterpay-styles",Yd={[Zr.BLACK]:{[Xr.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Xr.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Xr.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Zr.MINT]:{[Xr.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Xr.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Xr.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},zd={[Zr.BLACK]:{[Xr.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Xr.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Xr.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Zr.MINT]:{[Xr.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Xr.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Xr.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},Kd=new Set(["US","CA","AU","NZ"]);function Wd(e,t){var r=0;return e.forEach((e=>{r+=Ri.paymentRequestAmountToMoneyAmount(e,t)})),Ri.moneyAmountToPaymentRequestAmount(r,t)}function $d(e,t){return Wd(e.map((e=>e.amount)),t)}var Qd=function(e,t){return e.map((e=>({name:e.label,quantity:1,sku:e.id,price:{amount:e.amount,currency:t},imageUrl:e.imageUrl,pageUrl:e.productUrl})))},Zd=function(e,t){return e.map((e=>({displayName:e.label,amount:{amount:e.amount,currency:t}})))},Xd=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Jd=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=$d(e.lineItems,e.currencyCode);if(e.discounts)t=Wd([t,(r=e.discounts,n=e.currencyCode,"-".concat($d(r,n)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var r,n;return{amount:e.total.amount,currency:e.currencyCode}},ep=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,shippingAmount:{amount:e.amount,currency:t.currencyCode},orderAmount:{amount:e.total.amount,currency:t.currencyCode},taxAmount:{amount:$d(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},tp=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{givenName:t,familyName:r,city:e.suburb,state:e.state,postalCode:e.postcode,countryCode:e.countryCode,phone:e.phoneNumber,addressLines:n}},rp=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function np(e,t){return yl({[t]:e},{[t]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}var ip=function(e){return np(e,"shippingContact")};function op(e){var t=e.split("-")[1];return Kd.has(t)}var sp=function(e,t){return op(t)?Yd[e]:zd[e]},ap=function(e){return op(e)?"afterpay-brand.svg":"clearpay-brand.svg"},cp=[qn],up=[pn,hn];function lp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var dp=[25,50,75,100];class pp{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(Al.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,wu.addStyleElement(y.AFTERPAY_STYLES,Vd,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new Fn("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>Ri.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=ap(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(y.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*dp[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){lp(o,n,i,s,a,"next",e)}function a(e){lp(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=ap(this.locale);e.src=y.STATIC_ASSET(t)}this.buildAmounts().map((e=>Ri.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=Ri.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return hp(t,0);case 1:return hp(t,1);case 2:return hp(t,-2);case 3:return hp(t,-1);default:return[]}}}function hp(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function fp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function gp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){fp(o,n,i,s,a,"next",e)}function a(e){fp(o,n,i,s,a,"throw",e)}s(void 0)}))}}var mp,Ep,vp=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),yp=new Set(["AUD","GBP","USD","CAD","EUR"]),_p={[Zr.BLACK]:"#000",[Zr.MINT]:"#b2fce4"};class Ap extends ra{constructor(e,t,r,n,i){if(super(n),this.methodType=Wr.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new sa(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new kn(zs,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()})),this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e,t){var r=this;return gp((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=Js.ATTACHED,r.metricsHandler.logEvent(ro.AttachStart),r.metricsHandler.logEvent(io.Configured,t);try{n=nc(e)}catch(e){throw r.metricsHandler.logEvent(ro.AttachError),r.status===Js.ATTACHED&&(r.status=Js.DETACHED),e}if(!t||!t.useCustomButton){wu.addStyleElement(y.AFTERPAY_STYLES,Vd,r.resolveStylePromise,r.rejectStylePromise);try{yield r.stylesLoadedPromise}catch(e){throw r.status===Js.ATTACHED&&(r.status=Js.DETACHED),new Fn("attaching Afterpay")}var o=(null==t?void 0:t.buttonColor)||Zr.BLACK,s=(null==t?void 0:t.buttonType)||Xr.BuyNowWithAfterpay,a=sp(o,r.session.locale);if(!a)throw r.status===Js.ATTACHED&&(r.status=Js.DETACHED),new On("buttonColor",o);var c=a[s];if(!c)throw r.status===Js.ATTACHED&&(r.status=Js.DETACHED),new On("buttonType",s);var u='\n        <button\n          type="button"\n          class="sq-ap__button"\n          style="\n            background-color: '.concat(_p[o],";\n            background-image: url(").concat(y.STATIC_ASSET(c),');\n          "\n        ></button>\n      ');n.insertAdjacentHTML("afterbegin",u)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Jr.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent(ro.AttachOK),r.element=n,r.onTokenizeHandlerAdded&&(null===(i=r.element)||void 0===i||i.addEventListener("click",gp((function*(){yield r.openPaymentModal()}))))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){tc(e,Ja)}(e),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size}}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return gp((function*(){if(!yp.has(r.req.currencyCode))throw new mn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...yp].join(", ")));var n=new pp(r.req,r.context),i=nc(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ri.convertLocaleToUnderscore(this.session.locale);vp.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",gp((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return gp((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new ln;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new qn([xi.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===Js.DESTROYED?Promise.resolve(!1):(this.detachElement(Js.DESTROYED,io.Destroyed),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Js.DETACHED,io.Detached),Promise.resolve()}internalSetCheckoutToken(){var e=this;return gp((function*(){try{var t=yield e.paymentMessenger.request(jd.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw Ri.isInstanceOf(t,[...up,vn,mn])||(e.errorLogger.captureException(t),r=new Fn("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return gp((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent(ro.FirstInteraction)),t.metricsHandler.logEvent(no.ExternalSessionStart),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent(no.ExternalSessionError),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return gp((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r,n=yield t.paymentMessenger.request(jd.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.context.updateSession(n.sessionID),t.metricsHandler.logEvent(no.ExternalSessionOK);var i={details:{method:Wr.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==n||null===(r=n.afterpayData)||void 0===r?void 0:r.email}}},status:Qr.OK,token:n.token};null!=n&&n.billingContact&&(i.details.billing=null==n?void 0:n.billingContact),null!=n&&n.shippingContact&&(i.details.shipping={contact:null==n?void 0:n.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(i)}else t.metricsHandler.logEvent(no.ExternalSessionCancel),t.emitTokenizationResult({status:Qr.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent(no.ExternalSessionError),Ri.isInstanceOf(e,cp)||(t.errorLogger.captureException(e),o=new Fn("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent(no.ShippingOptionChangeOK),this.total.amount=Ri.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(on.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:rp(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(on.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new dn("PaymentRequest",on.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Hd.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent(no.ShippingAddressChangeOK),this.req.dispatchEvent(on.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:tp(e)},(e=>{if(e.error)t.reject(Hd.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(Hd.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=ep(e,r);t.resolve(n)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:t}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:y.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,t={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Jd(this.req)};if(this.req.lineItems&&(t.items=Qd(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=Zd(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=ip(e);if(!r.isValid)throw new vn(r.missingFields);t.shipping=Xd(e)}return t}totalMoney(){return{amount:Ri.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return gp((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({resolve:t,reject:r})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(ea()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={countryCode:this.req.countryCode,onCommenceCheckout:(o=gp((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=gp((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),target:"#".concat(n.id),shippingOptionRequired:this.req.requestShippingContact,addressMode:this.transferOptions.addressMode};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(mp||(mp={})),function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(Ep||(Ep={}));class Sp extends an{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,Sp.prototype)}}class Cp extends an{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,Cp.prototype)}}class Ip extends an{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,Ip.prototype)}}class Tp extends an{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,Tp.prototype)}}class Op extends an{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,Op.prototype)}}class Pp extends an{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Pp.prototype)}}function Rp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function wp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Rp(o,n,i,s,a,"next",e)}function a(e){Rp(o,n,i,s,a,"throw",e)}s(void 0)}))}}function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Np(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(r),!0).forEach((function(t){Dp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lp=new Set(["USD"]),xp="cash_app_pay_v1_element";class kp extends ra{constructor(e,t,r,n,i){if(super(n),this.methodType=Wr.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new sa(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!this.session.locationId)throw new kn(zs,"locationId");if(!this.session.cashAppPayMerchantIdentifier)throw new kn(zs,"merchantId");if(!Lp.has(this.req.currencyCode))throw new Ip("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Lp].join(", ")));var o=Ri.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode);if(o<1)throw new Ip("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new Tp;var s=Np({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(s).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[mp.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[mp.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[mp.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[mp.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[mp.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(mp).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return wp((function*(){n.throwIfDestroyedOrAlreadyAttached();var i=t,o=!1===i;i&&i.values&&(i.theme||(i.theme=i.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){Ho.has(e)&&(t[e]="string")})),yl(e,t)}(i);if(!s.isValid)throw new Sp(s.missingFields);var a=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:Zo,size:Qo,theme:Xo,width:Jo},i=JSON.parse(ns(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===wo&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(i);if(!a.isValid)throw new Cp(a.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw new Op;n.metricsHandler.logEvent(ro.AttachStart),i&&n.metricsHandler.logEvent(io.Configured,i),n.status=Js.ATTACHED,n.element=o?nc(e):rc(e);try{var c=document.createElement("div");c.id=xp,o?n.element.before(c):n.element.appendChild(c);var u="#".concat(xp);n.renderController=yield n.CashAppPayInstance.render(u,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent(ro.AttachOK)}catch(e){throw n.metricsHandler.logEvent(ro.AttachError),n.status===Js.ATTACHED&&(n.status=Js.DETACHED),e}}))()}destroy(){return this.status===Js.DESTROYED?Promise.resolve(!1):(this.detachElement(Js.DESTROYED,io.Destroyed),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(mp).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Js.DETACHED,io.Detached),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(io.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return wp((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Qr.CANCEL};this.metricsHandler.logEvent(no.ExternalSessionCancel),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={status:Qr.ERROR,errors:[new Fn("tokenizing Cash App Pay")]};this.metricsHandler.logEvent(no.ExternalSessionError),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return wp((function*(){var{customerProfile:r,grants:n,referenceId:i}=e,o=r.cashtag,s=n.payment,a=t.req.total.amount,c=t.req.currencyCode;try{if(!s)throw new Pp;var u=yield t.paymentMessenger.request(Ep.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),analyticsToken:t.session.analyticsToken,clientID:t.session.applicationId,locationID:t.session.locationId,sessionID:t.session.sessionId,websdkVersion:y.VERSION,websiteURL:t.session.sourceUrl,requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,applicationId:t.session.applicationId,cashAppPayData:{referenceId:i,grantId:s.grantId,cashtag:o,totalAmount:{amount:a,currency:c}}});return t.context.updateSession(u.sessionID),t.metricsHandler.logEvent(no.ExternalSessionOK),{details:{cashAppPay:{cashtag:o},method:Wr.CASH_APP_PAY},status:Qr.OK,token:u.token}}catch(e){var l=e;return t.metricsHandler.logEvent(no.ExternalSessionError),Ri.isInstanceOf(e,[qn])||(t.errorLogger.captureException(e),l=new Fn("tokenizing CashAppPay")),{status:Qr.ERROR,errors:[l]}}}))()}beginAuthorizationFlow(){var e=this;return wp((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Fn("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent(ro.CashAppPayClickValidating);try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent(ro.CashAppPayAuthStart)):e.metricsHandler.logEvent(ro.CashAppPayClickInvalid)}catch(t){throw e.metricsHandler.logEvent(ro.CashAppPayClickError),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent(no.ExternalSessionStart),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(ro.FirstInteraction)),this.dispatchEvent("customerInteraction",Np({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(xp);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}var Mp=function(e,t,r,n,i){return new Ap(e,t,r,n,i)},Up=function(e,t,r){return new Ad(e,t,r)},Hp=function(e,t,r,n,i){return new kp(e,t,r,n,i)},Bp=function(e,t,r,n,i){return new Fd(e,t,r,n,i)};function Gp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function jp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Gp(o,n,i,s,a,"next",e)}function a(e){Gp(o,n,i,s,a,"throw",e)}s(void 0)}))}}function qp(e,t){var{paymentMethodSupportDetail:r,metricsHandler:n}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new kn(zs,"locationId");if(r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:o}=r[e],s=Ks;throw o&&o in qs&&(s=Ws[o]),n.logEvent(ro.BuildError),new kn(s)}}function Fp(e,t){if(!(e instanceof xl))throw t.metricsHandler.logEvent(ro.BuildError),new vn([["paymentRequest","PaymentRequest"]])}function Vp(){return(Vp=jp((function*(e,t){return{authJwt:(yield e.request(Xs.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:y.GOOGLE_PAY_MERCHANT_ID}}))).apply(this,arguments)}class Yp{constructor(e,t,r){this.localeStrings=new Ro(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return jp((function*(){try{var r=yield t.getPaymentContext(lo.App);if(!r.featureFlagHandler.isActive(Ti.CanUseOverrideStrings))throw new Mn("overrideStrings");r.metricsHandler.logEvent(io.OverrideStrings,e),r.setTranslationOverrides(e)}catch(e){if(to(e))throw t.errorLogger.captureException(e),new Fn("overriding the strings");throw e}}))()}setLocale(e){var t=this;return jp((function*(){try{var r=yield t.getPaymentContext(lo.App);return r.metricsHandler.logEvent(io.SetLocale,e),r.setLocale(e)}catch(e){if(to(e))throw t.errorLogger.captureException(e),new Fn("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return jp((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new $s("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new $s("verifyBuyer","source","string")),t&&"object"==typeof t?n.push(...Jl.validateVerificationDetails(t,"verifyBuyer")):n.push(new $s("verifyBuyer","details","object")),n.length>0)throw new Qs(n);var i=yield r.getPaymentContext(lo.App);try{i.metricsHandler.logEvent(ro.VerificationStart);var o=yield Us.analyticsLibrary({applicationId:r.paymentOptions.applicationId,locationId:r.paymentOptions.locationId}),s=yield Us.verifyBuyer(o,e,t);return i.metricsHandler.logEvent(ro.VerificationOK),s}catch(e){if(i.metricsHandler.logEvent(ro.VerificationError),e instanceof Un)throw r.errorLogger.captureException(e),e;throw new Cn(e)}}))()}card(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.Card);r.metricsHandler.logEvent(ro.BuildStart);try{var n=new Gu(r,e);return r.metricsHandler.logEvent(ro.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}paymentRequest(e){var t=new Ul,r=new xl(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(lo.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent(io.Configured,e)})),r}googlePay(e){var t=this;return jp((function*(){var r,n,i=yield t.getPaymentContext(lo.GooglePay);i.metricsHandler.logEvent(ro.BuildStart),qp(fs.GOOGLE_PAY,i),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(ro.BuildError),new kn(Ys)}(i),Fp(e,i);try{var o=function(e,t){return Vp.apply(this,arguments)}(i.messenger,i.getSession()),s=Rs.loadGooglePayScript();[r,n]=yield Promise.all([s,o])}catch(e){throw i.metricsHandler.logEvent(ro.BuildError),e}try{var a=t.getPaymentRequestLock(e),c=Bp(r,e,i,n,a);return i.metricsHandler.logEvent(ro.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(ro.BuildError),e}}))()}applePay(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.ApplePay);r.metricsHandler.logEvent(ro.BuildStart),qp(fs.APPLE_PAY,r),Fp(e,r);try{var n=t.getPaymentRequestLock(e),i=Up(e,r,n);return r.metricsHandler.logEvent(ro.BuildOK),i}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}ach(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.Ach);r.metricsHandler.logEvent(ro.BuildStart),qp(fs.ACH,r);try{var n=yield Rs.loadPlaidLinkScript();return r.metricsHandler.logEvent(ro.BuildOK),new Fa(n,r,e)}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}cashApp(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.CashApp);r.metricsHandler.logEvent(ro.BuildStart),qp(fs.CASH_APP,r);try{var n=new nl(r,e);return r.metricsHandler.logEvent(ro.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}giftCard(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.GiftCard);r.metricsHandler.logEvent(ro.BuildStart);try{var n=new hl(r,e);return r.metricsHandler.logEvent(ro.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}afterpayClearpay(e){var t=this;return jp((function*(){var r=yield t.getPaymentContext(lo.Afterpay);if(r.metricsHandler.logEvent(ro.BuildStart),!r.featureFlagHandler.isActive(Ti.CanUseBNPLA))throw r.metricsHandler.logEvent(ro.BuildError),new Hl;qp(fs.AFTERPAY,r),Fp(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield Promise.all([Rs.loadAfterpayScript(),Rs.loadAfterpayMessagingScript()]),s=Mp(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent(ro.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(ro.BuildError),e}}))()}cashAppPay(e,t){var r=this;return jp((function*(){var n,i=yield r.getPaymentContext(lo.CashAppPayV1);i.metricsHandler.logEvent(ro.BuildStart),qp(fs.CASH_APP_PAY_V1,i),Fp(e,i);try{n=yield Rs.loadCashAppPayScript()}catch(e){throw i.errorLogger.captureException(e),e}try{if(void 0===n)throw new Fn("initializing Cash App Pay");var o=r.getPaymentRequestLock(e),s=y.CASH_APP_PAY_CLIENT_ID,a=yield n.pay({clientId:s}),c=Hp(a,e,t,i,o);return i.metricsHandler.logEvent(ro.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(ro.BuildError),e}}))()}getPaymentContext(e){var t=this;return jp((function*(){var{featureFlagValues:r,messenger:n,session:i,paymentMethodSupportDetail:o}=yield t.initializePaymentMethod();i.avt&&t.errorLogger.setAvt(i.avt),i.sessionId&&t.errorLogger.setSessionId(i.sessionId),i.instanceId&&t.errorLogger.setInstanceId(i.instanceId);var s=ea(),a=new ta(t.metrics,i,e,s);t.setAnalytics(i),t.contextEventTarget||(t.contextEventTarget=new Zs);var c=new js(t.errorLogger,n,a,i,o,t.localeStrings,t.contextEventTarget,r);return t.errorLogger.setFeatureFlagHandler(c.featureFlagHandler),c}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Jl.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var t=this.analyticsInterval=window.setInterval((()=>{Jl.initializeAnalytics(e,this.errorLogger,t)}),Ls);Jl.initializeAnalytics(e,this.errorLogger,t)}}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Fn("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(r),!0).forEach((function(t){Wp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $p=y.ENABLE_ERROR_LOGGING,Qp=y.env,Zp=new Map;function Xp(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,"-").concat(r);if(Zp.has(n))return Zp.get(n);if(!(t=g.windowLocation).hostname.endsWith("localhost")&&"https:"!==t.protocol)throw new wn;if(!g.isSupported())throw new Rn;!function(e){if(!function(e){return!(e.length<22||e.length>37)&&di.test(e)&&!pi.test(e)}(e))throw new cn;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new cn;if(r&&!fi())throw new un(h.production,y.env);if(n&&!hi(h.sandbox))throw new un(h.sandbox,y.env)}(e);var i=new Di({applicationId:e,applicationUrl:window.location.origin,enableErrorLogging:$p,environment:Qp,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:y.VERSION}),o=g.windowLocation.hostname,s={applicationId:e,hostname:o,locationId:r,sourceUrl:g.windowLocation.origin},a=new Es(i,{applicationId:e,hostname:o,locationId:r});a.logEvent({event:ro.LoadOK,eventSource:lo.App});var c=new Yp(s,a,i);return Zp.set(n,c),c}window.Square?(window.Square.errors=window.Square.errors?Kp(Kp({},po),window.Square.errors):po,window.Square._buildWebSDKV1Payments=Xp):window.Square={errors:po,_buildWebSDKV1Payments:Xp,payments:Xp}})()})();